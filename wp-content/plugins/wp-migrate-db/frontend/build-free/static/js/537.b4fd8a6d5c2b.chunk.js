"use strict";(self.webpackJSONPwpmdb=self.webpackJSONPwpmdb||[]).push([[537],{2537:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var a=n(86552),i=n(4665),l=n(42233),s=n(62295),r=n(53273),o=n(79043),c=n(70659),p=n.n(c),u=n(75338),d=n(40795),m=n(12544),_=n.n(m),g=(0,s.$j)((e=>({theme_plugin_files:e.theme_plugin_files,panel_info:e.panels,local_version:e.migrations.local_site.theme_plugin_files_version})),{})((e=>{var t="",n=e.theme_plugin_files,a=e.panelsOpen,s=e.selected,r=e.items,o=e.type;if(!_()(a,o)&&(n[o]||{}).enabled){if(t=e.summary,["other_files","muplugin_files"].includes(o)){if(0===s.length)return i.createElement("span",{className:"empty-warning"},(0,l.__)("Empty selection","wp-migrate-db"));var c=[];r.forEach((e=>{s.includes(e.path)&&c.push(e.name)})),t=c.join(", ")}"core_files"===o&&(t=(0,l.__)("Export all Core files","wp-migrate-db"))}return i.createElement(i.Fragment,null,(0,u.ZP)(t))})),h=n(83135),f=n(18832),v=n(63708),b=n(98135),E=e=>{var t=e.ariaLabel,n=e.optionChoices,a=e.type,l=e.value,r=(0,s.I0)(),o=n,c=t=>{r(e.updateOption(t.target.value,a))},p=Object.keys(o).map((e=>{var t=a+"-"+e,n=l===e;return i.createElement("div",{key:e},i.createElement("input",{id:t,type:"radio",value:e,checked:n,onChange:c,name:a}),i.createElement("label",{htmlFor:t},(0,u.ZP)(o[e])))}));return i.createElement("div",{className:"radiogroup",role:"radiogroup","aria-label":t},p)},w=n(78677),y=n(29214),x=n(29942),O=n(49275),P=(e,t,n)=>{var a=[];if("object"===typeof t){var i=Object.values(t).map((e=>e[0].path));"selected"===n["".concat(e,"_option")]&&n["".concat(e,"_selected")].forEach((e=>{i.includes(e)&&a.push(e)})),"except"===n["".concat(e,"_option")]&&n["".concat(e,"_excluded")].forEach((e=>{i.includes(e)&&a.push(e)})),"active"===n["".concat(e,"_option")]&&Object.values(t).forEach((e=>{e[0].active&&a.push(e[0].path)})),"all"===n["".concat(e,"_option")]&&(a=i)}return a};var Z=(e,t)=>{var n=e.theme_plugin_files,a=e.panelsOpen,c=e.current_migration,m=e.remote_site,_=e.local_site,Z=c.status,S=c.intent,N=(0,v.p)(e),C=(0,s.I0)(),k=t.title,L=t.type,F=t.panel_name,j=t.items,B=()=>"savefile"===S?j:j.filter((e=>!1===e.path.includes("wp-migrate-db"))),I=j.map((e=>e.path)),T=!1,W={push:"Push",pull:"Pull",savefile:"Export"},R={all:(0,l.gB)((0,l.__)("%s all %s","wp-migrate-db"),W[S],L),active:(0,l.gB)((0,l.__)("%s only active %s","wp-migrate-db"),W[S],L),selected:(0,l.gB)((0,l.__)("%s only selected %s","wp-migrate-db"),W[S],L),except:(0,l.gB)((0,l.__)("%s all %s <b>except</b> those selected","wp-migrate-db"),W[S],L)},M=function(e,t,n,a,i){var l=i.site_details,s=P(a,l[a],e),r={themes:"theme_files",plugins:"plugin_files",muplugins:"muplugin_files",others:"other_files",core:"core_files"},o=(e[r[a]]||{}).enabled;return{enabled:void 0!==o&&o,isOpen:t.includes(r[a]),selected:s,selectionEmpty:p()(n,{name:"SELECTED_".concat(a.toUpperCase(),"_EMPTY")})}}(n,a,Z,L,"pull"===S?m:_),U=M.enabled,X=M.isOpen,D=M.selected,J=M.selectionEmpty;(0,i.useEffect)((()=>{"select"===n["".concat(L,"_option")]&&C(e.updateSelected(D,L)),"except"===n["".concat(L,"_option")]&&e.updateExcluded(D,L)}),[]),U&&!X&&(T=!0);var V=[],$="selected"===n["".concat(L,"_option")]||"except"===n["".concat(L,"_option")];T&&V.push("has-divider"),U&&V.push("enabled");var A={muplugins:(0,l.__)("Select any must-use plugins to be included in the migration.","wp-migrate-db"),others:(0,l.__)("Select any other files and folders found in the <code>wp-content</code> directory to be included in the migration.","wp-migrate-db"),core:(0,l.__)("Including WordPress core files ensures that the exported archive contains the exact version of WordPress installed on this site, which is helpful when replicating the site in a new environment. ","wp-migrate-db")},G=(0,x.NR)(F,c,_,m);return i.createElement(d.Z,{title:k,className:V.join(" "),panelName:F,disabled:N,writable:G,enabled:U,forceDivider:T,callback:t=>(0,b.SF)(t,F,X,U,N,e.addOpenPanel,e.removeOpenPanel,(()=>C((0,r.OL)(F)))),toggle:(0,r.OL)(F),hasInput:!0,bodyClass:"tpf-panel-body",panelSummary:i.createElement(g,(0,o.Z)({},e,{disabled:N,items:B(),selected:D,title:k,type:F,summary:R[n["".concat(L,"_option")]]}))},i.createElement("div",null,["others","muplugins","core"].includes(L)&&i.createElement("p",{className:"panel-instructions"},(0,u.ZP)(A[L]),"core"===L&&i.createElement(O.Z,{link:"https://deliciousbrains.com/wp-migrate-db-pro/doc/full-site-exports/",content:(0,l.__)("Learn When to Include Core Files","wp-migrate-db"),utmContent:"wordpress-core-files-panel",utmCampaign:"wp-migrate-documentation",hasArrow:!0,anchorLink:"wordpress-core-files"})),!["others","muplugins","core"].includes(L)&&i.createElement(E,{ariaLabel:(0,l.gB)((0,l.__)("%s options","wp-migrate-db"),L),optionChoices:R,intent:"push",type:L,value:n["".concat(L,"_option")],updateOption:r.WZ}),"core"!==L&&i.createElement(w.Z,{id:"".concat(L,"-multiselect"),options:B(),extraLabels:"",stateManager:t=>{"except"===n["".concat(L,"_option")]&&e.updateExcluded(t,L),e.updateSelected(t,L)},selected:D,visible:!0,disabled:!$,updateSelected:t=>{var a=t.map((e=>e.path));"except"===n["".concat(L,"_option")]?e.updateExcluded(a,L):e.updateSelected(a,L)},selectInverse:()=>"except"===n["".concat(L,"_option")]?(0,f.Z)(e.updateExcluded,I,D,L):(0,f.Z)(e.updateSelected,I,D,L),showOptions:$,type:L,themePluginOption:n["".concat(L,"_option")]})),"core"!==L&&i.createElement("div",{className:"excludes-wrap"},i.createElement(h.Z,(0,o.Z)({},e,{excludes:n["".concat(L,"_excludes")],excludesUpdater:e.updateExcludes,type:L}))),J&&"selected"===n["".concat(L,"_option")]&&i.createElement(y.Z,{type:"danger"},(0,l.gB)((0,l.__)("Please select at least one %s for migration","wp-migrate-db"),{themes:"theme",plugins:"plugin",muplugins:"must-use plugin",others:"file or directory",core:"file or directory"}[L])),J&&"except"===n["".concat(L,"_option")]&&i.createElement(y.Z,{type:"danger"},(0,l.gB)((0,l.__)("Please select at least one %s to exclude from migration","wp-migrate-db"),"themes"===L?"theme":"plugin")))},S=n(4516),N=(n(22870),n(76178)),C=n(22633);function k(e,t){var n={};return["themes","plugins","muplugins","others","core"].forEach(((i,l)=>{var s="pull"===t?e.remote_site.site_details[i]:e.local_site.site_details[i],r="pull"===t||"savefile"===t?e.local_site.site_details[i]:e.remote_site.site_details[i],o=s,c=[],p=e=>{if(r){var t=r[e];if(t&&t[0].hasOwnProperty("version"))return t[0].version}return null};for(var u in o){var d=o[u];if(d){var m={name:d[0].name,path:d[0].path};["plugins","themes"].includes(i)&&"savefile"!==t&&(m=(0,a.Z)((0,a.Z)({},m),{},{active:d[0].active,sourceVersion:d[0].version,destinationVersion:p(u)})),c.push(m)}}return n[i]=c})),n}var L=e=>{var t=k(e,e.current_migration.intent).themes;return Z(e,{title:(0,l.__)("Themes","wp-migrate-db"),type:"themes",panel_name:"theme_files",items:t})},F=e=>{var t=k(e,e.current_migration.intent).plugins;return Z(e,{title:(0,l.__)("Plugins","wp-migrate-db"),type:"plugins",panel_name:"plugin_files",items:t})},j=e=>{var t=k(e,e.current_migration.intent).muplugins;return 0===t.length?null:Z(e,{title:(0,l.__)("Must-Use Plugins","wp-migrate-db"),type:"muplugins",panel_name:"muplugin_files",items:t})},B=e=>{var t=k(e,e.current_migration.intent).others;return 0===t.length?null:Z(e,{title:(0,l.__)("Other Files","wp-migrate-db"),type:"others",panel_name:"other_files",items:t})},I=e=>{var t=e.current_migration.intent,n=k(e,t).core;return"savefile"!==t||0===n.length?null:Z(e,{title:(0,l.__)("WordPress Core Files","wp-migrate-db"),type:"core",panel_name:"core_files",items:n})},T=(0,s.$j)((e=>{var t=(0,S.NR)("current_migration",e),n=(0,S.NR)("local_site",e),a=(0,S.NR)("remote_site",e),i=(0,N.O)("panelsOpen",e),l=(0,S.r5)("stages",e),s=(0,S.xg)("status",e);return{theme_plugin_files:e.theme_plugin_files,current_migration:t,local_site:n,remote_site:a,panelsOpen:i,stages:l,status:s}}),{toggleThemePluginFiles:r.OL,updateTPFOption:r.WZ,updateSelected:r.pM,updateExcluded:r.RX,togglePanelsOpen:C.SO,addOpenPanel:C.LX,removeOpenPanel:C.I4,updateExcludes:r.KX,kickOffTPFStage:r.G_})((e=>i.createElement("div",{className:"theme-plugin-files"},i.createElement(L,e),i.createElement(F,e),i.createElement(j,e),i.createElement(B,e),i.createElement(I,e))))}}]);