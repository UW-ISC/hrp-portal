(self.webpackJSONPwpmdb=self.webpackJSONPwpmdb||[]).push([[406],{36890:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var n,i=a(79043),l=a(4665),r=a(12544),s=a.n(r),o=a(62295),d=a(42233),m=a(75338),c=a(70659),p=a.n(c),u=a(19141),_=a.n(u),b=a(85571),f=a(78579),w=a(22633),v=(a(15988),a(76178)),g=a(83135),E=a(98135),h=a(4516),y=a(64533),O=a(66055),N=a(88368),M=a(50166),k=a(27940),P=a(31330),x=a.n(P),D=(a(36235),a(73042));function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},L.apply(this,arguments)}const C=e=>l.createElement("svg",L({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),n||(n=l.createElement("path",{d:"M13.444 2.5H2.556C1.696 2.5 1 3.122 1 3.889v9.722C1 14.378 1.696 15 2.556 15h10.888c.86 0 1.556-.622 1.556-1.389V3.89c0-.767-.696-1.389-1.556-1.389ZM11 1v3M5 1v3M1 8h14",stroke:"#B3B3B3",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})));a.p;const I=(0,o.$j)((e=>({media_files:e.media_files})),{updateMFDate:f.K4})((e=>{var t=e.media_files.date,a=(0,l.useState)(!1),n=(0,N.Z)(a,2),i=n[0],r=n[1],s=(0,l.useRef)(null),o=e=>{s.current.contains(e.target)||setTimeout((()=>{r(!1)}),50)};(0,l.useEffect)((()=>(i?document.addEventListener("mousedown",o):document.removeEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)})),[i]);var m=(0,M.Yz)(i,null,{from:{opacity:0,marginTop:-25},enter:{opacity:1,marginTop:0},leave:{opacity:0,marginTop:-25}});return t&&""!==t||(t=Date.now()),l.createElement("div",{className:"datepicker-wrap",ref:s},l.createElement("div",null,l.createElement("div",{tabIndex:"0",onClick:()=>{r(!0)},onKeyPress:e=>{"Enter"===e.key&&r(!0)},className:"media-date"},l.createElement(C,null),l.createElement("span",null,t?_()(t,"mmmm d yyyy @ hh:MM TT"):""))),m.map((a=>{var n=a.item,s=a.key,o=a.props;return n&&l.createElement(x(),{active:i},l.createElement(M.q.div,{key:s,style:o,className:"datepicker-box"},l.createElement(k.xZ,{currentDate:t||Date.now(),tabIndex:"0",onChange:t=>{e.updateMFDate(t)},is12Hour:!0,isInvalidDate:e=>{var t=new Date;return e.setHours(0,0,0,0),t.setHours(0,0,0,0),e>=new Date}}),l.createElement("div",{className:"close-wrap"},l.createElement("button",{onClick:()=>{r(!1)},className:"close-picker"},l.createElement(D.r,{"aria-hidden":!0}),l.createElement("span",{className:"screen-reader-text"},(0,d.__)("Close Date Picker","wp-migrate-db"))))))})))}));var T=a(29214),Z=a(29942),F={pull:(0,d.__)("Pull","wp-migrate-db"),push:(0,d.__)("Push","wp-migrate-db"),savefile:(0,d.__)("Export","wp-migrate-db")},j=e=>{var t=e.selected,a=e.labelledby;return l.createElement("div",null,l.createElement("input",{className:"media-option-radio",type:"radio",name:"media-option",checked:t,"aria-labelledby":a,readOnly:!0}))},B=e=>{var t=e.description,a=e.currentOption,n=e.intent,i=e.optionName,r=e.postDescription,s=e.className,m=e.label,c=(0,o.I0)(),p="media-".concat(i);return l.createElement("div",{onClick:()=>{(t=>{if(a===t)return null;c(e.setMediaOption(t))})(i)},className:"media-option ".concat(s||"")},l.createElement(j,{labelledby:p,selected:i===a}),l.createElement("div",null,l.createElement("strong",{id:p},(0,d.gB)(m,F[n])),l.createElement("div",{className:"option-description"},t),l.createElement("div",null,l.createElement("b",null,r))),l.createElement("div",{className:"datepicker-container"},"new"===i&&"new"===a&&l.createElement(I,null)))};const S=(0,o.$j)((e=>{var t=e.profiles.profile_loading,a=(0,v.O)("panelsOpen",e),n=(0,h.r5)("status",e),i=e.profiles.loaded_profile;return{isLoading:t,panel_info:e.panels,migration:e.migrations,current_migration:e.migrations.current_migration,addons:e.addons,media_files:e.media_files,status:n,panelsOpen:a,loaded_profile:i}}),{toggleMediaFiles:f.$0,setMediaOption:f.Lm,togglePanelsOpen:w.SO,addOpenPanel:w.LX,removeOpenPanel:w.I4,updateMFExcludes:f.rM,updateMFDate:f.K4})((e=>{var t=e.media_files,a=e.panelsOpen,n=e.status,r=e.migration,c=r.current_migration,u=r.local_site,w=c.intent,v=c.twoMultisites,h=c.localSource,N=t.enabled,M=(0,o.I0)(),k="undefined"!==typeof t.available&&!t.available,P=p()(n,{name:"MF_INVALID_DATE"}),x=p()(n,{name:"MF_OPTION_NULL"}),D=(0,o.v9)((e=>e.multisite_tools)),L={all:(0,d.__)("%s all media uploads","wp-migrate-db"),new:(0,d.__)("%s media uploads by date","wp-migrate-db"),new_subsequent:(0,d.__)("%s new and updated media uploads","wp-migrate-db")},C={all:D.enabled?(()=>{var e=h&&"false"===u.is_multisite||!h&&"true"===u.is_multisite;return!v&&e?(0,d.__)("Copies all files to the uploads folder of the subsite","wp-migrate-db"):(0,d.__)("Copies all files from the uploads folder of the subsite","wp-migrate-db")})():(0,d.__)("Copies all files from the uploads folder","wp-migrate-db"),new:(0,d.__)("Copies new and modified files after a specific date","wp-migrate-db"),new_subsequent:(0,d.__)("Copies new and modified files since the last migration","wp-migrate-db")},I=e=>!s()(a,"media_files")&&t.option&&t.enabled?l.createElement(l.Fragment,null,(0,d.gB)(L[t.option],F[w])):null,j=a.includes("media_files"),S=!1;N&&!j&&(S=!0);var q=[];return S&&q.push("has-divider"),N&&q.push("enabled"),l.createElement("div",{className:"media-files"},l.createElement(b.Z,{title:(0,d.__)("Media Uploads","wp-migrate-db"),className:q.join(" "),panelName:"media_files",disabled:k,enabled:N,panelSummary:l.createElement(I,(0,i.Z)({disabled:k,labels:L},e)),forceDivider:S,callback:t=>(0,E.SF)(t,"media_files",j,N,k,e.addOpenPanel,e.removeOpenPanel,(()=>M((0,O.m)(y.h6)))),toggle:(0,f.$0)(),hasInput:!0},l.createElement("div",{className:"media-files-inner-wrap"},l.createElement("div",{className:"media-files-options"},l.createElement(B,{description:C.all,label:L.all,currentOption:t.option,optionName:"all",intent:w,setMediaOption:f.Lm}),!(0,Z.aE)()&&l.createElement(B,{description:C.new_subsequent,label:L.new_subsequent,postDescription:t.last_migration&&""!==t.last_migration?_()(t.last_migration,"(mmmm d yyyy @ hh:MM TT)"):"",currentOption:t.option,optionName:"new_subsequent",intent:w,setMediaOption:f.Lm}),l.createElement(B,{description:C.new,label:L.new,currentOption:t.option,optionName:"new",intent:w,setMediaOption:f.Lm,className:"option-wrap"})),l.createElement("div",{className:"media-files-excludes excludes-wrap"},l.createElement(g.Z,(0,i.Z)({},e,{excludes:t.excludes,excludesUpdater:e.updateMFExcludes,type:"media"})))),P&&l.createElement(T.Z,{type:"danger"},(0,m.ZP)((0,d.__)('The date selected <a href="https://www.youtube.com/watch?v=G3AfIvJBcGo" target="_blank" rel="noopener noreferrer">is in the future</a>, please select a valid date.',"wp-migrate-db"))),x&&l.createElement(T.Z,{type:"danger"},(0,m.ZP)((0,d.__)("Please select a media option above.","wp-migrate-db")))))}))},24654:()=>{}}]);