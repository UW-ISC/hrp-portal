{"version":3,"file":"gp-nested-forms.js","mappings":"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","sources":["webpack:///./node_modules/tingle.js/dist/tingle.min.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///./node_modules/tabbable/dist/index.esm.js","webpack:///./node_modules/focus-trap/dist/focus-trap.esm.js","webpack:///./js/src/frontend.ts"],"sourcesContent":["!function(t,o){\"function\"==typeof define&&define.amd?define(o):\"object\"==typeof exports?module.exports=o():t.tingle=o()}(this,function(){var o=!1;function t(t){this.opts=function(){for(var t=1;t<arguments.length;t++)for(var o in arguments[t])arguments[t].hasOwnProperty(o)&&(arguments[0][o]=arguments[t][o]);return arguments[0]}({},{onClose:null,onOpen:null,beforeOpen:null,beforeClose:null,stickyFooter:!1,footer:!1,cssClass:[],closeLabel:\"Close\",closeMethods:[\"overlay\",\"button\",\"escape\"]},t),this.init()}function e(){this.modalBoxFooter&&(this.modalBoxFooter.style.width=this.modalBox.clientWidth+\"px\",this.modalBoxFooter.style.left=this.modalBox.offsetLeft+\"px\")}return t.prototype.init=function(){if(!this.modal)return function(){this.modal=document.createElement(\"div\"),this.modal.classList.add(\"tingle-modal\"),0!==this.opts.closeMethods.length&&-1!==this.opts.closeMethods.indexOf(\"overlay\")||this.modal.classList.add(\"tingle-modal--noOverlayClose\");this.modal.style.display=\"none\",this.opts.cssClass.forEach(function(t){\"string\"==typeof t&&this.modal.classList.add(t)},this),-1!==this.opts.closeMethods.indexOf(\"button\")&&(this.modalCloseBtn=document.createElement(\"button\"),this.modalCloseBtn.type=\"button\",this.modalCloseBtn.classList.add(\"tingle-modal__close\"),this.modalCloseBtnIcon=document.createElement(\"span\"),this.modalCloseBtnIcon.classList.add(\"tingle-modal__closeIcon\"),this.modalCloseBtnIcon.innerHTML='<svg viewBox=\"0 0 10 10\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M.3 9.7c.2.2.4.3.7.3.3 0 .5-.1.7-.3L5 6.4l3.3 3.3c.2.2.5.3.7.3.2 0 .5-.1.7-.3.4-.4.4-1 0-1.4L6.4 5l3.3-3.3c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0L5 3.6 1.7.3C1.3-.1.7-.1.3.3c-.4.4-.4 1 0 1.4L3.6 5 .3 8.3c-.4.4-.4 1 0 1.4z\" fill=\"#000\" fill-rule=\"nonzero\"/></svg>',this.modalCloseBtnLabel=document.createElement(\"span\"),this.modalCloseBtnLabel.classList.add(\"tingle-modal__closeLabel\"),this.modalCloseBtnLabel.innerHTML=this.opts.closeLabel,this.modalCloseBtn.appendChild(this.modalCloseBtnIcon),this.modalCloseBtn.appendChild(this.modalCloseBtnLabel));this.modalBox=document.createElement(\"div\"),this.modalBox.classList.add(\"tingle-modal-box\"),this.modalBoxContent=document.createElement(\"div\"),this.modalBoxContent.classList.add(\"tingle-modal-box__content\"),this.modalBox.appendChild(this.modalBoxContent),-1!==this.opts.closeMethods.indexOf(\"button\")&&this.modal.appendChild(this.modalCloseBtn);this.modal.appendChild(this.modalBox)}.call(this),function(){this._events={clickCloseBtn:this.close.bind(this),clickOverlay:function(t){var o=this.modal.offsetWidth-this.modal.clientWidth,e=t.clientX>=this.modal.offsetWidth-15,s=this.modal.scrollHeight!==this.modal.offsetHeight;if(\"MacIntel\"===navigator.platform&&0==o&&e&&s)return;-1!==this.opts.closeMethods.indexOf(\"overlay\")&&!function(t,o){for(;(t=t.parentElement)&&!t.classList.contains(o););return t}(t.target,\"tingle-modal\")&&t.clientX<this.modal.clientWidth&&this.close()}.bind(this),resize:this.checkOverflow.bind(this),keyboardNav:function(t){-1!==this.opts.closeMethods.indexOf(\"escape\")&&27===t.which&&this.isOpen()&&this.close()}.bind(this)},-1!==this.opts.closeMethods.indexOf(\"button\")&&this.modalCloseBtn.addEventListener(\"click\",this._events.clickCloseBtn);this.modal.addEventListener(\"mousedown\",this._events.clickOverlay),window.addEventListener(\"resize\",this._events.resize),document.addEventListener(\"keydown\",this._events.keyboardNav)}.call(this),document.body.appendChild(this.modal,document.body.firstChild),this.opts.footer&&this.addFooter(),this},t.prototype._busy=function(t){o=t},t.prototype._isBusy=function(){return o},t.prototype.destroy=function(){null!==this.modal&&(this.isOpen()&&this.close(!0),function(){-1!==this.opts.closeMethods.indexOf(\"button\")&&this.modalCloseBtn.removeEventListener(\"click\",this._events.clickCloseBtn);this.modal.removeEventListener(\"mousedown\",this._events.clickOverlay),window.removeEventListener(\"resize\",this._events.resize),document.removeEventListener(\"keydown\",this._events.keyboardNav)}.call(this),this.modal.parentNode.removeChild(this.modal),this.modal=null)},t.prototype.isOpen=function(){return!!this.modal.classList.contains(\"tingle-modal--visible\")},t.prototype.open=function(){if(!this._isBusy()){this._busy(!0);var t=this;return\"function\"==typeof t.opts.beforeOpen&&t.opts.beforeOpen(),this.modal.style.removeProperty?this.modal.style.removeProperty(\"display\"):this.modal.style.removeAttribute(\"display\"),document.getSelection().removeAllRanges(),this._scrollPosition=window.pageYOffset,document.body.classList.add(\"tingle-enabled\"),document.body.style.top=-this._scrollPosition+\"px\",this.setStickyFooter(this.opts.stickyFooter),this.modal.classList.add(\"tingle-modal--visible\"),\"function\"==typeof t.opts.onOpen&&t.opts.onOpen.call(t),t._busy(!1),this.checkOverflow(),this}},t.prototype.close=function(t){if(!this._isBusy()){if(this._busy(!0),!1,\"function\"==typeof this.opts.beforeClose)if(!this.opts.beforeClose.call(this))return void this._busy(!1);document.body.classList.remove(\"tingle-enabled\"),document.body.style.top=null,window.scrollTo({top:this._scrollPosition,behavior:\"instant\"}),this.modal.classList.remove(\"tingle-modal--visible\");var o=this;o.modal.style.display=\"none\",\"function\"==typeof o.opts.onClose&&o.opts.onClose.call(this),o._busy(!1)}},t.prototype.setContent=function(t){return\"string\"==typeof t?this.modalBoxContent.innerHTML=t:(this.modalBoxContent.innerHTML=\"\",this.modalBoxContent.appendChild(t)),this.isOpen()&&this.checkOverflow(),this},t.prototype.getContent=function(){return this.modalBoxContent},t.prototype.addFooter=function(){return function(){this.modalBoxFooter=document.createElement(\"div\"),this.modalBoxFooter.classList.add(\"tingle-modal-box__footer\"),this.modalBox.appendChild(this.modalBoxFooter)}.call(this),this},t.prototype.setFooterContent=function(t){return this.modalBoxFooter.innerHTML=t,this},t.prototype.getFooterContent=function(){return this.modalBoxFooter},t.prototype.setStickyFooter=function(t){return this.isOverflow()||(t=!1),t?this.modalBox.contains(this.modalBoxFooter)&&(this.modalBox.removeChild(this.modalBoxFooter),this.modal.appendChild(this.modalBoxFooter),this.modalBoxFooter.classList.add(\"tingle-modal-box__footer--sticky\"),e.call(this),this.modalBoxContent.style[\"padding-bottom\"]=this.modalBoxFooter.clientHeight+20+\"px\"):this.modalBoxFooter&&(this.modalBox.contains(this.modalBoxFooter)||(this.modal.removeChild(this.modalBoxFooter),this.modalBox.appendChild(this.modalBoxFooter),this.modalBoxFooter.style.width=\"auto\",this.modalBoxFooter.style.left=\"\",this.modalBoxContent.style[\"padding-bottom\"]=\"\",this.modalBoxFooter.classList.remove(\"tingle-modal-box__footer--sticky\"))),this},t.prototype.addFooterBtn=function(t,o,e){var s=document.createElement(\"button\");return s.innerHTML=t,s.addEventListener(\"click\",e),\"string\"==typeof o&&o.length&&o.split(\" \").forEach(function(t){s.classList.add(t)}),this.modalBoxFooter.appendChild(s),s},t.prototype.resize=function(){console.warn(\"Resize is deprecated and will be removed in version 1.0\")},t.prototype.isOverflow=function(){return window.innerHeight<=this.modalBox.clientHeight},t.prototype.checkOverflow=function(){this.modal.classList.contains(\"tingle-modal--visible\")&&(this.isOverflow()?this.modal.classList.add(\"tingle-modal--overflow\"):this.modal.classList.remove(\"tingle-modal--overflow\"),!this.isOverflow()&&this.opts.stickyFooter?this.setStickyFooter(!1):this.isOverflow()&&this.opts.stickyFooter&&(e.call(this),this.setStickyFooter(!0)))},{modal:t}});","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","/*!\n* tabbable 5.2.1\n* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE\n*/\nvar candidateSelectors = ['input', 'select', 'textarea', 'a[href]', 'button', '[tabindex]', 'audio[controls]', 'video[controls]', '[contenteditable]:not([contenteditable=\"false\"])', 'details>summary:first-of-type', 'details'];\nvar candidateSelector = /* #__PURE__ */candidateSelectors.join(',');\nvar matches = typeof Element === 'undefined' ? function () {} : Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\nvar getCandidates = function getCandidates(el, includeContainer, filter) {\n  var candidates = Array.prototype.slice.apply(el.querySelectorAll(candidateSelector));\n\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n\n  candidates = candidates.filter(filter);\n  return candidates;\n};\n\nvar isContentEditable = function isContentEditable(node) {\n  return node.contentEditable === 'true';\n};\n\nvar getTabindex = function getTabindex(node) {\n  var tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n\n  if (!isNaN(tabindexAttr)) {\n    return tabindexAttr;\n  } // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n\n\n  if (isContentEditable(node)) {\n    return 0;\n  } // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n  //  `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n  //  yet they are still part of the regular tab order; in FF, they get a default\n  //  `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n  //  order, consider their tab index to be 0.\n\n\n  if ((node.nodeName === 'AUDIO' || node.nodeName === 'VIDEO' || node.nodeName === 'DETAILS') && node.getAttribute('tabindex') === null) {\n    return 0;\n  }\n\n  return node.tabIndex;\n};\n\nvar sortOrderedTabbables = function sortOrderedTabbables(a, b) {\n  return a.tabIndex === b.tabIndex ? a.documentOrder - b.documentOrder : a.tabIndex - b.tabIndex;\n};\n\nvar isInput = function isInput(node) {\n  return node.tagName === 'INPUT';\n};\n\nvar isHiddenInput = function isHiddenInput(node) {\n  return isInput(node) && node.type === 'hidden';\n};\n\nvar isDetailsWithSummary = function isDetailsWithSummary(node) {\n  var r = node.tagName === 'DETAILS' && Array.prototype.slice.apply(node.children).some(function (child) {\n    return child.tagName === 'SUMMARY';\n  });\n  return r;\n};\n\nvar getCheckedRadio = function getCheckedRadio(nodes, form) {\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n};\n\nvar isTabbableRadio = function isTabbableRadio(node) {\n  if (!node.name) {\n    return true;\n  }\n\n  var radioScope = node.form || node.ownerDocument;\n\n  var queryRadios = function queryRadios(name) {\n    return radioScope.querySelectorAll('input[type=\"radio\"][name=\"' + name + '\"]');\n  };\n\n  var radioSet;\n\n  if (typeof window !== 'undefined' && typeof window.CSS !== 'undefined' && typeof window.CSS.escape === 'function') {\n    radioSet = queryRadios(window.CSS.escape(node.name));\n  } else {\n    try {\n      radioSet = queryRadios(node.name);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error('Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s', err.message);\n      return false;\n    }\n  }\n\n  var checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n};\n\nvar isRadio = function isRadio(node) {\n  return isInput(node) && node.type === 'radio';\n};\n\nvar isNonTabbableRadio = function isNonTabbableRadio(node) {\n  return isRadio(node) && !isTabbableRadio(node);\n};\n\nvar isHidden = function isHidden(node, displayCheck) {\n  if (getComputedStyle(node).visibility === 'hidden') {\n    return true;\n  }\n\n  var isDirectSummary = matches.call(node, 'details>summary:first-of-type');\n  var nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n\n  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {\n    return true;\n  }\n\n  if (!displayCheck || displayCheck === 'full') {\n    while (node) {\n      if (getComputedStyle(node).display === 'none') {\n        return true;\n      }\n\n      node = node.parentElement;\n    }\n  } else if (displayCheck === 'non-zero-area') {\n    var _node$getBoundingClie = node.getBoundingClientRect(),\n        width = _node$getBoundingClie.width,\n        height = _node$getBoundingClie.height;\n\n    return width === 0 && height === 0;\n  }\n\n  return false;\n}; // form fields (nested) inside a disabled fieldset are not focusable/tabbable\n//  unless they are in the _first_ <legend> element of the top-most disabled\n//  fieldset\n\n\nvar isDisabledFromFieldset = function isDisabledFromFieldset(node) {\n  if (isInput(node) || node.tagName === 'SELECT' || node.tagName === 'TEXTAREA' || node.tagName === 'BUTTON') {\n    var parentNode = node.parentElement;\n\n    while (parentNode) {\n      if (parentNode.tagName === 'FIELDSET' && parentNode.disabled) {\n        // look for the first <legend> as an immediate child of the disabled\n        //  <fieldset>: if the node is in that legend, it'll be enabled even\n        //  though the fieldset is disabled; otherwise, the node is in a\n        //  secondary/subsequent legend, or somewhere else within the fieldset\n        //  (however deep nested) and it'll be disabled\n        for (var i = 0; i < parentNode.children.length; i++) {\n          var child = parentNode.children.item(i);\n\n          if (child.tagName === 'LEGEND') {\n            if (child.contains(node)) {\n              return false;\n            } // the node isn't in the first legend (in doc order), so no matter\n            //  where it is now, it'll be disabled\n\n\n            return true;\n          }\n        } // the node isn't in a legend, so no matter where it is now, it'll be disabled\n\n\n        return true;\n      }\n\n      parentNode = parentNode.parentElement;\n    }\n  } // else, node's tabbable/focusable state should not be affected by a fieldset's\n  //  enabled/disabled state\n\n\n  return false;\n};\n\nvar isNodeMatchingSelectorFocusable = function isNodeMatchingSelectorFocusable(options, node) {\n  if (node.disabled || isHiddenInput(node) || isHidden(node, options.displayCheck) || // For a details element with a summary, the summary element gets the focus\n  isDetailsWithSummary(node) || isDisabledFromFieldset(node)) {\n    return false;\n  }\n\n  return true;\n};\n\nvar isNodeMatchingSelectorTabbable = function isNodeMatchingSelectorTabbable(options, node) {\n  if (!isNodeMatchingSelectorFocusable(options, node) || isNonTabbableRadio(node) || getTabindex(node) < 0) {\n    return false;\n  }\n\n  return true;\n};\n\nvar tabbable = function tabbable(el, options) {\n  options = options || {};\n  var regularTabbables = [];\n  var orderedTabbables = [];\n  var candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorTabbable.bind(null, options));\n  candidates.forEach(function (candidate, i) {\n    var candidateTabindex = getTabindex(candidate);\n\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate\n      });\n    }\n  });\n  var tabbableNodes = orderedTabbables.sort(sortOrderedTabbables).map(function (a) {\n    return a.node;\n  }).concat(regularTabbables);\n  return tabbableNodes;\n};\n\nvar focusable = function focusable(el, options) {\n  options = options || {};\n  var candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorFocusable.bind(null, options));\n  return candidates;\n};\n\nvar isTabbable = function isTabbable(node, options) {\n  options = options || {};\n\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorTabbable(options, node);\n};\n\nvar focusableCandidateSelector = /* #__PURE__ */candidateSelectors.concat('iframe').join(',');\n\nvar isFocusable = function isFocusable(node, options) {\n  options = options || {};\n\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorFocusable(options, node);\n};\n\nexport { focusable, isFocusable, isTabbable, tabbable };\n//# sourceMappingURL=index.esm.js.map\n","/*!\n* focus-trap 6.7.1\n* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE\n*/\nimport { tabbable, isFocusable } from 'tabbable';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar activeFocusTraps = function () {\n  var trapQueue = [];\n  return {\n    activateTrap: function activateTrap(trap) {\n      if (trapQueue.length > 0) {\n        var activeTrap = trapQueue[trapQueue.length - 1];\n\n        if (activeTrap !== trap) {\n          activeTrap.pause();\n        }\n      }\n\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex === -1) {\n        trapQueue.push(trap);\n      } else {\n        // move this existing trap to the front of the queue\n        trapQueue.splice(trapIndex, 1);\n        trapQueue.push(trap);\n      }\n    },\n    deactivateTrap: function deactivateTrap(trap) {\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex !== -1) {\n        trapQueue.splice(trapIndex, 1);\n      }\n\n      if (trapQueue.length > 0) {\n        trapQueue[trapQueue.length - 1].unpause();\n      }\n    }\n  };\n}();\n\nvar isSelectableInput = function isSelectableInput(node) {\n  return node.tagName && node.tagName.toLowerCase() === 'input' && typeof node.select === 'function';\n};\n\nvar isEscapeEvent = function isEscapeEvent(e) {\n  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;\n};\n\nvar isTabEvent = function isTabEvent(e) {\n  return e.key === 'Tab' || e.keyCode === 9;\n};\n\nvar delay = function delay(fn) {\n  return setTimeout(fn, 0);\n}; // Array.find/findIndex() are not supported on IE; this replicates enough\n//  of Array.findIndex() for our needs\n\n\nvar findIndex = function findIndex(arr, fn) {\n  var idx = -1;\n  arr.every(function (value, i) {\n    if (fn(value)) {\n      idx = i;\n      return false; // break\n    }\n\n    return true; // next\n  });\n  return idx;\n};\n/**\n * Get an option's value when it could be a plain value, or a handler that provides\n *  the value.\n * @param {*} value Option's value to check.\n * @param {...*} [params] Any parameters to pass to the handler, if `value` is a function.\n * @returns {*} The `value`, or the handler's returned value.\n */\n\n\nvar valueOrHandler = function valueOrHandler(value) {\n  for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    params[_key - 1] = arguments[_key];\n  }\n\n  return typeof value === 'function' ? value.apply(void 0, params) : value;\n};\n\nvar getActualTarget = function getActualTarget(event) {\n  // NOTE: If the trap is _inside_ a shadow DOM, event.target will always be the\n  //  shadow host. However, event.target.composedPath() will be an array of\n  //  nodes \"clicked\" from inner-most (the actual element inside the shadow) to\n  //  outer-most (the host HTML document). If we have access to composedPath(),\n  //  then use its first element; otherwise, fall back to event.target (and\n  //  this only works for an _open_ shadow DOM; otherwise,\n  //  composedPath()[0] === event.target always).\n  return event.target.shadowRoot && typeof event.composedPath === 'function' ? event.composedPath()[0] : event.target;\n};\n\nvar createFocusTrap = function createFocusTrap(elements, userOptions) {\n  var doc = (userOptions === null || userOptions === void 0 ? void 0 : userOptions.document) || document;\n\n  var config = _objectSpread2({\n    returnFocusOnDeactivate: true,\n    escapeDeactivates: true,\n    delayInitialFocus: true\n  }, userOptions);\n\n  var state = {\n    // @type {Array<HTMLElement>}\n    containers: [],\n    // list of objects identifying the first and last tabbable nodes in all containers/groups in\n    //  the trap\n    // NOTE: it's possible that a group has no tabbable nodes if nodes get removed while the trap\n    //  is active, but the trap should never get to a state where there isn't at least one group\n    //  with at least one tabbable node in it (that would lead to an error condition that would\n    //  result in an error being thrown)\n    // @type {Array<{ container: HTMLElement, firstTabbableNode: HTMLElement|null, lastTabbableNode: HTMLElement|null }>}\n    tabbableGroups: [],\n    nodeFocusedBeforeActivation: null,\n    mostRecentlyFocusedNode: null,\n    active: false,\n    paused: false,\n    // timer ID for when delayInitialFocus is true and initial focus in this trap\n    //  has been delayed during activation\n    delayInitialFocusTimer: undefined\n  };\n  var trap; // eslint-disable-line prefer-const -- some private functions reference it, and its methods reference private functions, so we must declare here and define later\n\n  var getOption = function getOption(configOverrideOptions, optionName, configOptionName) {\n    return configOverrideOptions && configOverrideOptions[optionName] !== undefined ? configOverrideOptions[optionName] : config[configOptionName || optionName];\n  };\n\n  var containersContain = function containersContain(element) {\n    return !!(element && state.containers.some(function (container) {\n      return container.contains(element);\n    }));\n  };\n  /**\n   * Gets the node for the given option, which is expected to be an option that\n   *  can be either a DOM node, a string that is a selector to get a node, `false`\n   *  (if a node is explicitly NOT given), or a function that returns any of these\n   *  values.\n   * @param {string} optionName\n   * @returns {undefined | false | HTMLElement | SVGElement} Returns\n   *  `undefined` if the option is not specified; `false` if the option\n   *  resolved to `false` (node explicitly not given); otherwise, the resolved\n   *  DOM node.\n   * @throws {Error} If the option is set, not `false`, and is not, or does not\n   *  resolve to a node.\n   */\n\n\n  var getNodeForOption = function getNodeForOption(optionName) {\n    var optionValue = config[optionName];\n\n    if (typeof optionValue === 'function') {\n      for (var _len2 = arguments.length, params = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        params[_key2 - 1] = arguments[_key2];\n      }\n\n      optionValue = optionValue.apply(void 0, params);\n    }\n\n    if (!optionValue) {\n      if (optionValue === undefined || optionValue === false) {\n        return optionValue;\n      } // else, empty string (invalid), null (invalid), 0 (invalid)\n\n\n      throw new Error(\"`\".concat(optionName, \"` was specified but was not a node, or did not return a node\"));\n    }\n\n    var node = optionValue; // could be HTMLElement, SVGElement, or non-empty string at this point\n\n    if (typeof optionValue === 'string') {\n      node = doc.querySelector(optionValue); // resolve to node, or null if fails\n\n      if (!node) {\n        throw new Error(\"`\".concat(optionName, \"` as selector refers to no known node\"));\n      }\n    }\n\n    return node;\n  };\n\n  var getInitialFocusNode = function getInitialFocusNode() {\n    var node = getNodeForOption('initialFocus'); // false explicitly indicates we want no initialFocus at all\n\n    if (node === false) {\n      return false;\n    }\n\n    if (node === undefined) {\n      // option not specified: use fallback options\n      if (containersContain(doc.activeElement)) {\n        node = doc.activeElement;\n      } else {\n        var firstTabbableGroup = state.tabbableGroups[0];\n        var firstTabbableNode = firstTabbableGroup && firstTabbableGroup.firstTabbableNode; // NOTE: `fallbackFocus` option function cannot return `false` (not supported)\n\n        node = firstTabbableNode || getNodeForOption('fallbackFocus');\n      }\n    }\n\n    if (!node) {\n      throw new Error('Your focus-trap needs to have at least one focusable element');\n    }\n\n    return node;\n  };\n\n  var updateTabbableNodes = function updateTabbableNodes() {\n    state.tabbableGroups = state.containers.map(function (container) {\n      var tabbableNodes = tabbable(container);\n\n      if (tabbableNodes.length > 0) {\n        return {\n          container: container,\n          firstTabbableNode: tabbableNodes[0],\n          lastTabbableNode: tabbableNodes[tabbableNodes.length - 1]\n        };\n      }\n\n      return undefined;\n    }).filter(function (group) {\n      return !!group;\n    }); // remove groups with no tabbable nodes\n    // throw if no groups have tabbable nodes and we don't have a fallback focus node either\n\n    if (state.tabbableGroups.length <= 0 && !getNodeForOption('fallbackFocus') // returning false not supported for this option\n    ) {\n      throw new Error('Your focus-trap must have at least one container with at least one tabbable node in it at all times');\n    }\n  };\n\n  var tryFocus = function tryFocus(node) {\n    if (node === false) {\n      return;\n    }\n\n    if (node === doc.activeElement) {\n      return;\n    }\n\n    if (!node || !node.focus) {\n      tryFocus(getInitialFocusNode());\n      return;\n    }\n\n    node.focus({\n      preventScroll: !!config.preventScroll\n    });\n    state.mostRecentlyFocusedNode = node;\n\n    if (isSelectableInput(node)) {\n      node.select();\n    }\n  };\n\n  var getReturnFocusNode = function getReturnFocusNode(previousActiveElement) {\n    var node = getNodeForOption('setReturnFocus', previousActiveElement);\n    return node ? node : node === false ? false : previousActiveElement;\n  }; // This needs to be done on mousedown and touchstart instead of click\n  // so that it precedes the focus event.\n\n\n  var checkPointerDown = function checkPointerDown(e) {\n    var target = getActualTarget(e);\n\n    if (containersContain(target)) {\n      // allow the click since it ocurred inside the trap\n      return;\n    }\n\n    if (valueOrHandler(config.clickOutsideDeactivates, e)) {\n      // immediately deactivate the trap\n      trap.deactivate({\n        // if, on deactivation, we should return focus to the node originally-focused\n        //  when the trap was activated (or the configured `setReturnFocus` node),\n        //  then assume it's also OK to return focus to the outside node that was\n        //  just clicked, causing deactivation, as long as that node is focusable;\n        //  if it isn't focusable, then return focus to the original node focused\n        //  on activation (or the configured `setReturnFocus` node)\n        // NOTE: by setting `returnFocus: false`, deactivate() will do nothing,\n        //  which will result in the outside click setting focus to the node\n        //  that was clicked, whether it's focusable or not; by setting\n        //  `returnFocus: true`, we'll attempt to re-focus the node originally-focused\n        //  on activation (or the configured `setReturnFocus` node)\n        returnFocus: config.returnFocusOnDeactivate && !isFocusable(target)\n      });\n      return;\n    } // This is needed for mobile devices.\n    // (If we'll only let `click` events through,\n    // then on mobile they will be blocked anyways if `touchstart` is blocked.)\n\n\n    if (valueOrHandler(config.allowOutsideClick, e)) {\n      // allow the click outside the trap to take place\n      return;\n    } // otherwise, prevent the click\n\n\n    e.preventDefault();\n  }; // In case focus escapes the trap for some strange reason, pull it back in.\n\n\n  var checkFocusIn = function checkFocusIn(e) {\n    var target = getActualTarget(e);\n    var targetContained = containersContain(target); // In Firefox when you Tab out of an iframe the Document is briefly focused.\n\n    if (targetContained || target instanceof Document) {\n      if (targetContained) {\n        state.mostRecentlyFocusedNode = target;\n      }\n    } else {\n      // escaped! pull it back in to where it just left\n      e.stopImmediatePropagation();\n      tryFocus(state.mostRecentlyFocusedNode || getInitialFocusNode());\n    }\n  }; // Hijack Tab events on the first and last focusable nodes of the trap,\n  // in order to prevent focus from escaping. If it escapes for even a\n  // moment it can end up scrolling the page and causing confusion so we\n  // kind of need to capture the action at the keydown phase.\n\n\n  var checkTab = function checkTab(e) {\n    var target = getActualTarget(e);\n    updateTabbableNodes();\n    var destinationNode = null;\n\n    if (state.tabbableGroups.length > 0) {\n      // make sure the target is actually contained in a group\n      // NOTE: the target may also be the container itself if it's tabbable\n      //  with tabIndex='-1' and was given initial focus\n      var containerIndex = findIndex(state.tabbableGroups, function (_ref) {\n        var container = _ref.container;\n        return container.contains(target);\n      });\n\n      if (containerIndex < 0) {\n        // target not found in any group: quite possible focus has escaped the trap,\n        //  so bring it back in to...\n        if (e.shiftKey) {\n          // ...the last node in the last group\n          destinationNode = state.tabbableGroups[state.tabbableGroups.length - 1].lastTabbableNode;\n        } else {\n          // ...the first node in the first group\n          destinationNode = state.tabbableGroups[0].firstTabbableNode;\n        }\n      } else if (e.shiftKey) {\n        // REVERSE\n        // is the target the first tabbable node in a group?\n        var startOfGroupIndex = findIndex(state.tabbableGroups, function (_ref2) {\n          var firstTabbableNode = _ref2.firstTabbableNode;\n          return target === firstTabbableNode;\n        });\n\n        if (startOfGroupIndex < 0 && state.tabbableGroups[containerIndex].container === target) {\n          // an exception case where the target is the container itself, in which\n          //  case, we should handle shift+tab as if focus were on the container's\n          //  first tabbable node, and go to the last tabbable node of the LAST group\n          startOfGroupIndex = containerIndex;\n        }\n\n        if (startOfGroupIndex >= 0) {\n          // YES: then shift+tab should go to the last tabbable node in the\n          //  previous group (and wrap around to the last tabbable node of\n          //  the LAST group if it's the first tabbable node of the FIRST group)\n          var destinationGroupIndex = startOfGroupIndex === 0 ? state.tabbableGroups.length - 1 : startOfGroupIndex - 1;\n          var destinationGroup = state.tabbableGroups[destinationGroupIndex];\n          destinationNode = destinationGroup.lastTabbableNode;\n        }\n      } else {\n        // FORWARD\n        // is the target the last tabbable node in a group?\n        var lastOfGroupIndex = findIndex(state.tabbableGroups, function (_ref3) {\n          var lastTabbableNode = _ref3.lastTabbableNode;\n          return target === lastTabbableNode;\n        });\n\n        if (lastOfGroupIndex < 0 && state.tabbableGroups[containerIndex].container === target) {\n          // an exception case where the target is the container itself, in which\n          //  case, we should handle tab as if focus were on the container's\n          //  last tabbable node, and go to the first tabbable node of the FIRST group\n          lastOfGroupIndex = containerIndex;\n        }\n\n        if (lastOfGroupIndex >= 0) {\n          // YES: then tab should go to the first tabbable node in the next\n          //  group (and wrap around to the first tabbable node of the FIRST\n          //  group if it's the last tabbable node of the LAST group)\n          var _destinationGroupIndex = lastOfGroupIndex === state.tabbableGroups.length - 1 ? 0 : lastOfGroupIndex + 1;\n\n          var _destinationGroup = state.tabbableGroups[_destinationGroupIndex];\n          destinationNode = _destinationGroup.firstTabbableNode;\n        }\n      }\n    } else {\n      // NOTE: the fallbackFocus option does not support returning false to opt-out\n      destinationNode = getNodeForOption('fallbackFocus');\n    }\n\n    if (destinationNode) {\n      e.preventDefault();\n      tryFocus(destinationNode);\n    } // else, let the browser take care of [shift+]tab and move the focus\n\n  };\n\n  var checkKey = function checkKey(e) {\n    if (isEscapeEvent(e) && valueOrHandler(config.escapeDeactivates, e) !== false) {\n      e.preventDefault();\n      trap.deactivate();\n      return;\n    }\n\n    if (isTabEvent(e)) {\n      checkTab(e);\n      return;\n    }\n  };\n\n  var checkClick = function checkClick(e) {\n    if (valueOrHandler(config.clickOutsideDeactivates, e)) {\n      return;\n    }\n\n    var target = getActualTarget(e);\n\n    if (containersContain(target)) {\n      return;\n    }\n\n    if (valueOrHandler(config.allowOutsideClick, e)) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  }; //\n  // EVENT LISTENERS\n  //\n\n\n  var addListeners = function addListeners() {\n    if (!state.active) {\n      return;\n    } // There can be only one listening focus trap at a time\n\n\n    activeFocusTraps.activateTrap(trap); // Delay ensures that the focused element doesn't capture the event\n    // that caused the focus trap activation.\n\n    state.delayInitialFocusTimer = config.delayInitialFocus ? delay(function () {\n      tryFocus(getInitialFocusNode());\n    }) : tryFocus(getInitialFocusNode());\n    doc.addEventListener('focusin', checkFocusIn, true);\n    doc.addEventListener('mousedown', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('touchstart', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('click', checkClick, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('keydown', checkKey, {\n      capture: true,\n      passive: false\n    });\n    return trap;\n  };\n\n  var removeListeners = function removeListeners() {\n    if (!state.active) {\n      return;\n    }\n\n    doc.removeEventListener('focusin', checkFocusIn, true);\n    doc.removeEventListener('mousedown', checkPointerDown, true);\n    doc.removeEventListener('touchstart', checkPointerDown, true);\n    doc.removeEventListener('click', checkClick, true);\n    doc.removeEventListener('keydown', checkKey, true);\n    return trap;\n  }; //\n  // TRAP DEFINITION\n  //\n\n\n  trap = {\n    activate: function activate(activateOptions) {\n      if (state.active) {\n        return this;\n      }\n\n      var onActivate = getOption(activateOptions, 'onActivate');\n      var onPostActivate = getOption(activateOptions, 'onPostActivate');\n      var checkCanFocusTrap = getOption(activateOptions, 'checkCanFocusTrap');\n\n      if (!checkCanFocusTrap) {\n        updateTabbableNodes();\n      }\n\n      state.active = true;\n      state.paused = false;\n      state.nodeFocusedBeforeActivation = doc.activeElement;\n\n      if (onActivate) {\n        onActivate();\n      }\n\n      var finishActivation = function finishActivation() {\n        if (checkCanFocusTrap) {\n          updateTabbableNodes();\n        }\n\n        addListeners();\n\n        if (onPostActivate) {\n          onPostActivate();\n        }\n      };\n\n      if (checkCanFocusTrap) {\n        checkCanFocusTrap(state.containers.concat()).then(finishActivation, finishActivation);\n        return this;\n      }\n\n      finishActivation();\n      return this;\n    },\n    deactivate: function deactivate(deactivateOptions) {\n      if (!state.active) {\n        return this;\n      }\n\n      clearTimeout(state.delayInitialFocusTimer); // noop if undefined\n\n      state.delayInitialFocusTimer = undefined;\n      removeListeners();\n      state.active = false;\n      state.paused = false;\n      activeFocusTraps.deactivateTrap(trap);\n      var onDeactivate = getOption(deactivateOptions, 'onDeactivate');\n      var onPostDeactivate = getOption(deactivateOptions, 'onPostDeactivate');\n      var checkCanReturnFocus = getOption(deactivateOptions, 'checkCanReturnFocus');\n\n      if (onDeactivate) {\n        onDeactivate();\n      }\n\n      var returnFocus = getOption(deactivateOptions, 'returnFocus', 'returnFocusOnDeactivate');\n\n      var finishDeactivation = function finishDeactivation() {\n        delay(function () {\n          if (returnFocus) {\n            tryFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation));\n          }\n\n          if (onPostDeactivate) {\n            onPostDeactivate();\n          }\n        });\n      };\n\n      if (returnFocus && checkCanReturnFocus) {\n        checkCanReturnFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation)).then(finishDeactivation, finishDeactivation);\n        return this;\n      }\n\n      finishDeactivation();\n      return this;\n    },\n    pause: function pause() {\n      if (state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = true;\n      removeListeners();\n      return this;\n    },\n    unpause: function unpause() {\n      if (!state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = false;\n      updateTabbableNodes();\n      addListeners();\n      return this;\n    },\n    updateContainerElements: function updateContainerElements(containerElements) {\n      var elementsAsArray = [].concat(containerElements).filter(Boolean);\n      state.containers = elementsAsArray.map(function (element) {\n        return typeof element === 'string' ? doc.querySelector(element) : element;\n      });\n\n      if (state.active) {\n        updateTabbableNodes();\n      }\n\n      return this;\n    }\n  }; // initialize container elements\n\n  trap.updateContainerElements(elements);\n  return trap;\n};\n\nexport { createFocusTrap };\n//# sourceMappingURL=focus-trap.esm.js.map\n","// @ts-nocheck\n\n/**\n* Nested Forms, mama!\n*/\nimport * as focusTrap from 'focus-trap';\nimport tingle from 'tingle.js';\n\nconst ko = window.ko;\n\n( function( $ ) {\n\n\t/*\n\t * String.format was deprecated in GF 2.7.1 and will be removed in GF 2.8 in favor of String.prototype.gformFormat.\n\t *\n\t * As we support older versions of GF, we need to add String.prototype.gformFormat if it doesn't exist.\n\t */\n\tif (!String.prototype.gformFormat) {\n\t\tString.prototype.gformFormat = function () {\n\t\t\tvar args = arguments;\n\t\t\treturn this.replace(/{(\\d+)}/g, function (match, number) {\n\t\t\t\treturn typeof args[number] != 'undefined' ? args[number] : match;\n\t\t\t});\n\t\t};\n\t}\n\n\twindow.GPNestedForms = function( args ) {\n\n\t\tvar self = this;\n\n\t\t// copy all args to current object: formId, fieldId\n\t\tfor ( const prop in args ) {\n\t\t\tif ( args.hasOwnProperty( prop ) ) {\n\t\t\t\tself[prop] = args[prop];\n\t\t\t}\n\t\t}\n\n\t\tself.destroy = function() {\n\t\t\tself.modal?.destroy();\n\t\t\t$( document ).off( '.{0}'.gformFormat( self.getNamespace() ) );\n\t\t\twindow.gform.removeHook( 'action', 'gform_list_post_item_add', 10, self.getNamespace() );\n\t\t\twindow.gform.removeHook( 'action', 'gform_list_post_item_delete', 10, self.getNamespace() );\n\t\t\tgform.removeFilter( 'gform_calculation_formula', 10, 'gpnf_{0}_{1}'.gformFormat( self.formId, self.fieldId ) );\n\n\t\t\t/*\n\t\t\t * Important placeholder! Knockout is not destroyed in this function as rebinding to an already-bound\n\t\t\t * container will cause major issues due to templates not being present after the initial binding.\n\t\t\t *\n\t\t\t * Specifically, items in a foreach will be removed after binding and are not available for subsequent\n\t\t\t * bindings. This will result in errors saying no template contents found.\n\t\t\t */\n\t\t}\n\n\t\tself.init = function() {\n\n\t\t\tself.id \t\t\t\t  = self.getDebugId();\n\t\t\tself.$fieldContainer      = $( '#field_{0}_{1}'.gformFormat( self.formId, self.fieldId ) );\n\t\t\tself.$parentFormContainer = self.$fieldContainer.parents('form').first();\n\t\t\tself.$modalSource         = $( '.gpnf-nested-form-{0}-{1}'.gformFormat( self.formId, self.fieldId ) );\n\t\t\tself.isActive             = false;\n\t\t\tself.initialized          = false;\n\n\t\t\t// Handle init when form is reloaded via AJAX.\n\t\t\tif ( typeof window[ 'GPNestedForms_{0}_{1}'.gformFormat( self.formId, self.fieldId ) ] !== 'undefined' ) {\n\t\t\t\tvar oldGPNF  = window[ 'GPNestedForms_{0}_{1}'.gformFormat( self.formId, self.fieldId ) ];\n\t\t\t\tself.entries = oldGPNF.entries;\n\n\t\t\t\toldGPNF.destroy();\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Calculations need to be init if the form is not visible to support multi-page forms that use call on\n\t\t\t * Nested Form calculations such as {Nested Form:xx:sum=yy} from other pages.\n\t\t\t *\n\t\t\t * See #21815\n\t\t\t */\n\t\t\tself.initKnockout();\n\t\t\tself.initCalculations();\n\n\t\t\twindow[ 'GPNestedForms_{0}_{1}'.gformFormat( self.formId, self.fieldId ) ] = self;\n\n\t\t\tself.finalizeInit();\n\t\t};\n\n\t\tself.inHiddenPage = function() {\n\t\t\tvar currentPageNumber = $( '#gform_source_page_number_{0}'.gformFormat( self.formId ) ).val();\n\t\t\tvar $currentPage = self.$parentFormContainer.find('#gform_page_{0}_{1}'.gformFormat( self.formId, currentPageNumber ) );\n\n\t\t\treturn !!($currentPage.length &&\n\t\t\t\t!$currentPage.find(self.$fieldContainer).length);\n\t\t}\n\n\t\t/**\n\t\t * Handles setting up the session, binding the Add Entry button, the Tingle modal, and more.\n\t\t *\n\t\t * Runs only if the field/page is visible as setting up the session triggers an XHR request and can overload the server in rare (but possible) circumstances. Everything else such as\n\t\t * Knockout will be initialized prior to this method and initialized regardless of field visibility.\n\t\t *\n\t\t * This method was originally added for Page Transitions to call it when pages are navigating if using Soft Validation.\n\t\t *\n\t\t * @return void\n\t\t */\n\t\tself.finalizeInit = function() {\n\t\t\tif (self.inHiddenPage()) {\n\t\t\t\tconsole.debug('Nested form is not visible. Skipping loading.');\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar sessionPromise = self.initSession();\n\n\t\t\t// Click handler for add entry button.\n\t\t\t$( document ).on( 'click.{0}'.gformFormat( self.getNamespace() ), '#field_{0}_{1} .gpnf-add-entry'.gformFormat( self.formId, self.fieldId ), self.openAddModal );\n\n\t\t\tself.initModal();\n\t\t\tself.addColorStyles();\n\n\t\t\t/**\n\t\t\t * Filter whether or not the child form HTML should be immediately fetched when the parent form is loaded.\n\t\t\t *\n\t\t\t * @since 1.0-beta-9\n\t\t\t *\n\t\t\t * @param boolean \t\t\tautoLoadChildForm   Whether or not to load child form HTML on parent form load.\n\t\t\t * @param int           \tformId \t\t\t\tThe parent form ID.\n\t\t\t * @param int             \tfieldId   \t\t\tThe field ID of the Nested Form field.\n\t\t\t * @param {GPNestedForms} \tgpnf      \t\t\tCurrent instance of the GPNestedForms object.\n\t\t\t */\n\t\t\tif (gform.applyFilters('gpnf_fetch_form_html_on_load', true, self.formId, self.fieldId, self)) {\n\t\t\t\tsessionPromise.always(self.getFormHtml);\n\t\t\t}\n\n\t\t\tself.initialized = true;\n\t\t}\n\n\t\t/**\n\t\t * Initialize cookie for GPNF via AJAX.\n\t\t *\n\t\t * Session should only be initialized once per parent form.\n\t\t *\n\t\t * @returns {JQueryXHR}\n\t\t */\n\t\tself.initSession = function() {\n\t\t\tif (typeof window['gpnfSessionPromise_' + self.formId] === 'undefined') {\n\t\t\t\twindow['gpnfSessionPromise_' + self.formId] = $.post( self.ajaxUrl, self.sessionData, function( response ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * Do something after the Nested Forms session has been initialized.\n\t\t\t\t\t *\n\t\t\t\t\t * @since 1.0-beta-8.62\n\t\t\t\t\t *\n\t\t\t\t\t * @param {GPNestedForms} gpnf Current instance of the GPNestedForms class.\n\t\t\t\t\t */\n\t\t\t\t\tgform.doAction( 'gpnf_session_initialized', self );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\treturn window['gpnfSessionPromise_' + self.formId];\n\t\t};\n\n\t\tself.initModal = function() {\n\n\t\t\tself.modalArgs = gform.applyFilters( 'gpnf_modal_args', {\n\t\t\t\tlabels: self.modalLabels,\n\t\t\t\tcloseLabel: self.modalLabels.closeScreenReaderLabel,\n\t\t\t\tcolors: self.modalColors,\n\t\t\t\tfooter: true,\n\t\t\t\tstickyFooter: self.modalStickyFooter,\n\t\t\t\tcloseMethods: [ 'button' ],\n\t\t\t\tcssClass: [ self.modalClass, 'gpnf-modal', 'gpnf-modal-{0}-{1}'.gformFormat( self.formId, self.fieldId ) ],\n\t\t\t\tonOpen: function() {\n\t\t\t\t\tself.isActive = true;\n\n\t\t\t\t\tif ( ! self.trap && self.enableFocusTrap ) {\n\t\t\t\t\t\tself.trap = focusTrap.createFocusTrap( self.modal.modalBox.parentElement, {\n\t\t\t\t\t\t\tescapeDeactivates: false,\n\t\t\t\t\t\t\tallowOutsideClick: true,\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( self.trap ) {\n\t\t\t\t\t\tself.trap.activate();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonClose: function() {\n\t\t\t\t\tself.clearModalContent();\n\t\t\t\t\tself.setParentFocus();\n\n\t\t\t\t\tif ( self.trap ) {\n\t\t\t\t\t\tself.trap.deactivate();\n\t\t\t\t\t}\n\n\t\t\t\t\tself.isActive = false;\n\t\t\t\t},\n\t\t\t\tbeforeOpen: function() {\n\t\t\t\t\tself.$modal\n\t\t\t\t\t\t.attr( 'role', 'dialog' )\n\t\t\t\t\t\t.attr( 'aria-label', self.getModalTitle() )\n\t\t\t\t\t\t.attr( 'aria-modal', 'true' );\n\t\t\t\t\tself.$modal.find( '.tingle-modal__close' )\n\t\t\t\t\t\t.attr( 'aria-label', self.modalLabels.closeScreenReaderLabel );\n\t\t\t\t},\n\t\t\t\tbeforeClose: function() { return true; }\n\t\t\t}, self.formId, self.fieldId, self );\n\n\t\t\tif ( self.modal ) {\n\t\t\t\tself.$modal = $( self.modal.modal );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tself.modal  = new tingle.modal( self.modalArgs );\n\t\t\tself.$modal = $( self.modal.modal );\n\n\t\t\tself.bindResizeEvents();\n\n\t\t\t// Re-init modaled forms; 'gpnf_post_render' triggered on any nested form's first load every time a nested\n\t\t\t// form is retrieved via ajax (aka editing, first load and each page load).\n\t\t\t$( document ).on( 'gpnf_post_render.{0}'.gformFormat( self.getNamespace() ), function( event, formId, currentPage ) {\n\n\t\t\t\tvar $nestedForm = $( '#gform_wrapper_' + formId );\n\n\t\t\t\t/**\n\t\t\t\t * Only initialize the scripts for a given child form if it is the current form. In the case where\n\t\t\t\t * multiple Nested Form fields include the same child form, use the isActive flag (set when\n\t\t\t\t * opening/closing a Nested Form field's modal) to ensure we're only initializing scripts for the\n\t\t\t\t * current instance of that child form.\n\t\t\t\t */\n\t\t\t\tif ( formId == self.nestedFormId && $nestedForm.length > 0 && self.isActive ) {\n\n\t\t\t\t\tself.scrollToTop();\n\n\t\t\t\t\t// Don't re-init buttons on the confirmation page; currentPage is undefined on the confirmation page.\n\t\t\t\t\tif ( currentPage ) {\n\t\t\t\t\t\tself.initFormScripts(currentPage);\n\t\t\t\t\t\t// Set the focus on the first focusable field on each page render of the child form. Timeout\n\t\t\t\t\t\t// helps with Mac's VoiceOver which does not consistently follow the focus without it.\n\t\t\t\t\t\tsetTimeout( function () {\n\t\t\t\t\t\t\tconst $firstInput = self.$modal.find( 'input, select, textarea' ).filter( ':visible' ).first();\n\n\t\t\t\t\t\t\tif ( $firstInput.hasClass( 'datepicker' ) ) {\n\t\t\t\t\t\t\t\tconst inputAlreadyDisabled = $firstInput.prop( 'disabled' );\n\t\t\t\t\t\t\t\t$firstInput?.datepicker( 'disable' );\n\n\t\t\t\t\t\t\t\t/* Disabling datepicker() also sets disabled on the input. We don't want that, we only want to disable the datepicker so it doesn't show on initial focus. */\n\t\t\t\t\t\t\t\tif ( !inputAlreadyDisabled ) {\n\t\t\t\t\t\t\t\t\t$firstInput.prop( 'disabled', false );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t$firstInput.focus();\n\n\t\t\t\t\t\t\tif ( $firstInput.hasClass( 'datepicker' ) ) {\n\t\t\t\t\t\t\t\t$firstInput?.datepicker( 'enable' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tself.addModalButtons();\n\t\t\t\t\t\tself.observeDefaultButtons();\n\t\t\t\t\t\tself.triggerButtonAnimationOnSubmit();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t};\n\n\t\tself.initKnockout = function() {\n\t\t\t/**\n\t\t\t * If VM already exists, reset the observable array as rebinding can cause issues.\n\t\t\t */\n\t\t\tif (ko.dataFor(self.$fieldContainer[0])) {\n\t\t\t\tko.dataFor(self.$fieldContainer[0]).entries(self.prepareEntriesForKnockout(self.entries));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Setup Knockout to handle our Nested Form field entries.\n\t\t\tself.viewModel = new EntriesModel(self.prepareEntriesForKnockout(self.entries), self);\n\t\t\tself.addRowIdComputedToEntries( self.viewModel.entries );\n\n\t\t\tko.applyBindings(self.viewModel, self.$fieldContainer[0]);\n\t\t};\n\n\t\tself.initCalculations = function() {\n\n\t\t\tgform.addFilter( 'gform_calculation_formula', self.parseCalcs, 10, 'gpnf_{0}_{1}'.gformFormat( self.formId, self.fieldId ) );\n\t\t\tself.runCalc( self.formId );\n\n\t\t};\n\n\t\tself.openAddModal = function( event ) {\n\n\t\t\tevent.preventDefault();\n\n\t\t\tevent.target.disabled = true;\n\n\t\t\tvar $spinner = new AjaxSpinner( event.target, self.spinnerUrl, '' );\n\n\t\t\tself.getFormHtml().done(function (html) {\n\t\t\t\tself.setModalContent(html);\n\t\t\t\tself.openModal( $( event.target ) );\n\t\t\t}).always(function() {\n\t\t\t\t$spinner.destroy();\n\t\t\t\tevent.target.disabled = false;\n\t\t\t});\n\n\t\t};\n\n\t\tself.openModal = function( trigger ) {\n\t\t\t/**\n\t\t\t * Filter whether the nested form modal should open or not.\n\t\t\t *\n\t\t\t * @since 1.1.9\n\t\t\t *\n\t\t\t * @param bool  \t\t\tshouldOpenModal \tWhether the modal should open or not.\n\t\t\t * @param object \t\t\tmodal\t\t\t\tThe tingle.js modal object.\n\t\t\t * @param int \t\t\t\tformId\t\t\t\tThe form ID of the parent form containing the nested form field.\n\t\t\t * @param int \t\t\t\tfieldId\t\t\t\tThe field ID of the nested form field.\n\t\t\t * @param {GPNestedForms} \tgpnf      \t\t\tCurrent instance of the GPNestedForms object.\n\t\t\t */\n\t\t\tvar shouldOpenModal = window.gform.applyFilters( 'gpnf_should_open_modal', true, self.modal, self.formId, self.fieldId, self );\n\n\t\t\tif ( !shouldOpenModal ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tself.saveParentFocus( trigger );\n\t\t\tself.modal.open();\n\t\t\t/**\n\t\t\t * We need to to manually trigger our `gpnf_post_render` event so that init scripts are executed in\n\t\t\t * two scenarios.\n\t\t\t *\n\t\t\t * 1. When running GF 2.5 as it wraps init scripts in DOMContentLoaded (instead of jQuery's ready event) so\n\t\t\t *    child form init scripts are not automatically executed when they're included in the DOM.\n\t\t\t * 2. When the version of jQuery is less than v3. v3.5 is included in WordPress 5.5+. Before that,\n\t\t\t *    jQuery v1.12.4 was included. Not sure why this is necessary but I'm assuming most users will either be\n\t\t\t *    on WordPress 5.5+ - or - progressively, they'll be on GF 2.5.\n\t\t\t */\n\t\t\tif ( self.isGF25 || parseInt( jQuery.fn.jquery ) < 3 ) {\n\t\t\t\t$( document ).trigger( 'gpnf_post_render', [ self.nestedFormId, '1' ] );\n\t\t\t}\n\t\t\tself.initIframe( self.nestedFormId );\n\t\t};\n\n\t\tself.saveParentFocus = function( trigger ) {\n\t\t\tself.parentFocus = trigger;\n\t\t};\n\n\t\tself.setParentFocus = function() {\n\n\t\t\tvar $focus;\n\n\t\t\tswitch ( typeof self.parentFocus ) {\n\t\t\t\tcase 'undefined':\n\t\t\t\t\t// This is here to account for 3rd-parties calling openModal() without adding a trigger.\n\t\t\t\t\treturn;\n\t\t\t\tcase 'function':\n\t\t\t\t\t$focus = self.parentFocus.apply();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t$focus = self.parentFocus;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t$focus.focus();\n\n\t\t};\n\n\t\tself.scrollToTop = function() {\n\n\t\t\t// Scroll back to the top of the modal when a new page is loaded or there is a validation error.\n\t\t\tvar modalContainerNode = $( self.modal.modal )[0];\n\t\t\tif ( modalContainerNode.scroll ) {\n\t\t\t\tmodalContainerNode.scroll( { top: 0, left: 0, behavior: 'smooth' } );\n\t\t\t} else {\n\t\t\t\tmodalContainerNode.scrollTop = 0;\n\t\t\t}\n\t\t};\n\n\t\tself.observeDefaultButtons = function() {\n\t\t\tvar observer = self.getDefaultButtonObserver();\n\t\t\tself.getDefaultButtons().each( function() {\n\t\t\t\tobserver.observe( $( this )[0], { attributes: true, childList: true } );\n\t\t\t} );\n\t\t};\n\n\t\tself.getDefaultButtonObserver = function() {\n\t\t\treturn new MutationObserver( function( mutations ) {\n\t\t\t\tmutations.forEach(function(mutation) {\n\t\t\t\t\tif ( mutation.type == 'attributes' && ( mutation.attributeName == 'style' || mutation.attributeName == 'disabled' ) ) {\n\t\t\t\t\t\tself.addModalButtons();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\t\t};\n\n\t\t/**\n\t\t * Trigger spinner on Submit/Next buttons when form submission is triggered by Enter keypress.\n\t\t *\n\t\t * This is an accessibility/usability improvement that provides a better visual indicator that the form is being submitted.\n\t\t */\n\t\tself.triggerButtonAnimationOnSubmit = function() {\n\t\t\tself.$modal.on( 'keypress', function( event ) {\n\t\t\t\tself.$modal.data( 'gpnfEnterPressed', event.which === 13 );\n\t\t\t} );\n\t\t\tself.$modal.find( 'form' ).on( 'submit', function() {\n\t\t\t\tif ( self.$modal.data( 'gpnfEnterPressed' ) ) {\n\t\t\t\t\tself.$modal.data( 'gpnfEnterPressed', false );\n\t\t\t\t\t$( self.modal.modalBoxFooter ).find( '.gpnf-btn-submit, .gpnf-btn-next' ).addClass( 'gpnf-spinner' );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tself.setModalContent = function( html, mode ) {\n\n\t\t\t$( document ).off( 'gform_post_render.gpnf' );\n\n\t\t\tself.setMode( typeof mode === 'undefined' ? 'add' : 'edit' );\n\n\t\t\t$( self.modal.modalBoxContent )\n\t\t\t\t.html( typeof html !== 'undefined' ? html : self.formHtml )\n\t\t\t\t.prepend( '<div class=\"gpnf-modal-header\" style=\"background-color:{1}\">{0}</div>'.gformFormat( self.getModalTitle(), self.modalHeaderColor ) );\n\n\t\t\tself.$modal.find( 'input[name=\"gpnf_nested_form_field_id\"]' ).val( self.fieldId );\n\n\t\t\tself.addModalButtons();\n\t\t\tself.stashFormData();\n\n\t\t\tvar observer = self.getDefaultButtonObserver();\n\t\t\tself.getDefaultButtons().each( function() {\n\t\t\t\tobserver.observe( $( this )[0], { attributes: true, childList: true } );\n\t\t\t} );\n\n\t\t};\n\n\t\tself.clearModalContent = function() {\n\t\t\t$( self.modal.modalBoxContent ).html( '' );\n\t\t};\n\n\t\tself.setMode = function( mode ) {\n\t\t\tself.mode = mode;\n\t\t};\n\n\t\tself.getMode = function() {\n\t\t\treturn self.mode ? self.mode : 'add';\n\t\t};\n\n\t\tself.getModalTitle = function() {\n\t\t\treturn self.getMode() === 'add' ? self.modalArgs.labels.title : self.modalArgs.labels.editTitle;\n\t\t};\n\n\t\t/**\n\t\t * Logic borrowed from gravityforms.js (Lines 2539-2551)\n\t\t *\n\t\t * @returns {boolean}\n\t\t */\n\t\tself.hasPendingUploads = function() {\n\t\t\tvar pendingUploads = false;\n\n\t\t\tif (!gfMultiFileUploader || !gfMultiFileUploader.uploaders) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t$.each(gfMultiFileUploader.uploaders, function(i, uploader){\n\t\t\t\tif(uploader.total.queued>0){\n\t\t\t\t\tpendingUploads = true;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn pendingUploads;\n\t\t}\n\n\t\tself.addModalButtons = function() {\n\n\t\t\tself.modal.modalBoxFooter.innerHTML = '';\n\n\t\t\t/**\n\t\t\t * Filter the CSS classes of buttons in the Nested Form modal.\n\t\t\t *\n\t\t\t * @since 1.0-beta-10.1\n\t\t\t *\n\t\t\t * @param string \t\t\tbuttonClasses \t\tCSS classes for the button\n\t\t\t * @param string \t\t\tbuttonType \t\t\tThe button type. Will be one of the following: 'submit', 'next', 'previous', 'delete', 'cancel'\n\t\t\t * @param int           \tformId \t\t\t\tThe parent form ID.\n\t\t\t * @param int             \tfieldId   \t\t\tThe field ID of the Nested Form field.\n\t\t\t * @param {GPNestedForms} \tgpnf      \t\t\tCurrent instance of the GPNestedForms object.\n\t\t\t */\n\t\t\tvar cancelButtonCSSClasses = window.gform.applyFilters('gpnf_modal_button_css_classes', 'tingle-btn tingle-btn--default gpnf-btn-cancel', 'cancel', self.formId, self.fieldId, self);\n\n\t\t\tself.modal.addFooterBtn( self.modalArgs.labels.cancel, cancelButtonCSSClasses, function() {\n\t\t\t\tself.handleCancelClick( $( this ) );\n\t\t\t} );\n\n\t\t\tself.getDefaultButtons().each( function() {\n\t\t\t\tvar $button = $( this );\n\t\t\t\tvar buttonType = null;\n\t\t\t\t// Check if WooCommerce Gravity Forms is active. It hides Submit buttons by default and replaces them\n\t\t\t\t// with an \"Add to Cart\" button. We can ignore that in nested forms. We should also check for the style\n\t\t\t\t// attribute on the element to ensure that conditional paging functions in those scenarios.\n\t\t\t\tvar isWooCommercePage = typeof window.jQuery.fn.wc_gravity_form === 'function';\n\t\t\t\tif ( $button[0].style.display !== 'none' || ( isWooCommercePage && $button[0].style.display === '' ) ) {\n\n\t\t\t\t\tvar isSubmitButton = ( $button.attr( 'type' ) === 'submit' || $button.attr( 'type' ) === 'image' ),\n\t\t\t\t\t\tlabel          = isSubmitButton ? self.getSubmitButtonLabel() : $button.val(),\n\t\t\t\t\t\tclasses        = [ 'tingle-btn', 'tingle-btn--primary' ],\n\t\t\t\t\t\tisDisabled     = $button.is( ':disabled' );\n\n\t\t\t\t\tif ( $button.hasClass( 'gform_previous_button' ) ) {\n\t\t\t\t\t\tclasses.push( 'gpnf-btn-previous' );\n\t\t\t\t\t\tbuttonType = 'previous';\n\t\t\t\t\t} else if ( $button.hasClass( 'gform_next_button' ) ) {\n\t\t\t\t\t\tbuttonType = 'next';\n\t\t\t\t\t\tclasses.push( 'gpnf-btn-next' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbuttonType = 'submit';\n\t\t\t\t\t\tclasses.push( 'gpnf-btn-submit' );\n\t\t\t\t\t}\n\n\t\t\t\t\tclasses = window.gform.applyFilters('gpnf_modal_button_css_classes', classes.join(' '), buttonType, self.formId, self.fieldId, self);\n\n\t\t\t\t\tvar tingleBtn = self.modal.addFooterBtn( label, classes, function( event ) {\n\t\t\t\t\t\tif (self.hasPendingUploads()) {\n\t\t\t\t\t\t\tvar gfStrings = typeof gform_gravityforms != 'undefined' ? gform_gravityforms.strings : {};\n\t\t\t\t\t\t\talert(gfStrings.currently_uploading);\n\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$( event.target ).addClass( 'gpnf-spinner' );\n\t\t\t\t\t\t$button.click();\n\t\t\t\t\t} );\n\n\t\t\t\t\tif ( isDisabled ) {\n\t\t\t\t\t\t$( tingleBtn ).prop( 'disabled', true );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tvar mobileCancelClasses = window.gform.applyFilters('gpnf_modal_button_css_classes', 'tingle-btn tingle-btn--default gpnf-btn-cancel-mobile', 'cancel-mobile', self.formId, self.fieldId, self);\n\n\t\t\tself.modal.addFooterBtn( self.modalArgs.labels.cancel, mobileCancelClasses, function() {\n\t\t\t\tself.handleCancelClick( $( this ) );\n\t\t\t} );\n\n\t\t\t// If we're in edit mode - AND - there is a form, show the delete button. Otherwise, we're showing an error message.\n\t\t\tif ( self.mode == 'edit' && $( self.modal.modalBoxContent ).find( '.gform_wrapper' ).length > 0 ) {\n\t\t\t\tvar deleteButtonClasses = window.gform.applyFilters('gpnf_modal_button_css_classes', 'tingle-btn tingle-btn--danger tingle-btn--pull-left gpnf-btn-delete', 'delete', self.formId, self.fieldId, self);\n\n\t\t\t\tself.modal.addFooterBtn( self.modalArgs.labels.delete, deleteButtonClasses, function() {\n\t\t\t\t\tvar $button = $( this );\n\t\t\t\t\tvar isConfirmActionEnabled = self.modalArgs.labels.confirmAction !== false && self.modalArgs.labels.confirmAction !== '';\n\t\t\t\t\tif ( ! $button.data( 'isConfirming' ) && isConfirmActionEnabled ) {\n\t\t\t\t\t\t$button\n\t\t\t\t\t\t\t.data( 'isConfirming', true )\n\t\t\t\t\t\t\t.text( self.modalArgs.labels.confirmAction );\n\t\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\t\t$button\n\t\t\t\t\t\t\t\t.data( 'isConfirming', false )\n\t\t\t\t\t\t\t\t.text( self.modalArgs.labels.delete );\n\t\t\t\t\t\t}, 3000 );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.getEntryRow( self.getCurrentEntryId() ).find( '.delete-button' ).click();\n\t\t\t\t\t\tself.modal.close();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\n\t\t};\n\n\t\tself.getSubmitButtonLabel = function() {\n\n\t\t\tvar mode = self.getMode();\n\n\t\t\tif ( mode === 'add' && self.modalArgs.labels.submit ) {\n\t\t\t\treturn self.modalArgs.labels.submit;\n\t\t\t} else if ( mode === 'edit' && self.modalArgs.labels.editSubmit ) {\n\t\t\t\treturn self.modalArgs.labels.editSubmit;\n\t\t\t}\n\n\t\t\treturn self.getModalTitle();\n\t\t}\n\n\t\tself.addColorStyles = function() {\n\n\t\t\tif ( self.$style && typeof self.$style.remove === 'function' ) {\n\t\t\t\tself.$style.remove();\n\t\t\t}\n\n\t\t\tself.$style = '<style type=\"text/css\"> \\\n\t\t\t\t\t.gpnf-modal-{0}-{1} .tingle-btn--primary { background-color: {2}; } \\\n\t\t\t\t\t.gpnf-modal-{0}-{1} .tingle-btn--default { background-color: {3}; } \\\n\t\t\t\t\t.gpnf-modal-{0}-{1} .tingle-btn--danger { background-color: {4}; } \\\n\t\t\t\t</style>'.gformFormat( self.formId, self.fieldId, self.modalArgs.colors.primary, self.modalArgs.colors.secondary, self.modalArgs.colors.danger );\n\n\t\t\t$( 'head' ).append( self.$style );\n\n\t\t};\n\n\t\t/**\n\t\t * Gets nested form's submit button\n\t\t *\n\t\t * Looks for HTML elements in the nested form's footer and returns them in\n\t\t * a jQuery object.\n\t\t *\n\t\t * This will match the following elements:\n\t\t * <input type=\"button\">\n\t\t * <input type=\"submit\">\n\t\t * <input type=\"image\">\n\t\t * <button>\n\t\t *\n\t\t * @param void\n\t\t * @return object   jQuery object containing default buttons\n\t\t */\n\t\tself.getDefaultButtons = function() {\n\t\t\t/*\n\t\t\t * The .first() call here is used in the event that the parent form markup is on the page more than one time. This can happen with\n\t\t\t * third-party plugins such as wpDataTables.\n\t\t\t */\n\t\t\treturn $( '#gform_page_{0}_{1} .gform_page_footer, #gform_{0} .gform_footer, #gform_{0} .gfield--type-submit'.gformFormat( self.nestedFormId, self.getCurrentPage() ) ).first().find( 'input[type=\"button\"], input[type=\"submit\"], input[type=\"image\"], button' );\n\t\t};\n\n\t\tself.handleCancelClick = function( $button ) {\n\t\t\t/**\n\t\t\t * Filter if GPNF should not warn before canceling adding a new entry.\n\t\t\t *\n\t\t\t * Return \"true\" here to disable the \"Are you sure?\" button prompt.\n\t\t\t *\n\t\t\t * @since 1.0-beta-9.24\n\t\t\t */\n\t\t\tvar disableNewCancelConfirmation = window.gform.applyFilters( 'gpnf_disable_new_cancel_confirmation', self.modalArgs.labels.confirmAction === false || self.modalArgs.labels.confirmAction === '' );\n\t\t\tif ( $button.data( 'isConfirming' ) ) {\n\t\t\t\tself.modal.close();\n\t\t\t} else if ( self.hasChanges() && ! disableNewCancelConfirmation ) {\n\t\t\t\t$button\n\t\t\t\t\t.data( 'isConfirming', true )\n\t\t\t\t\t.removeClass( 'tingle-btn--default' )\n\t\t\t\t\t.addClass( 'tingle-btn--danger' )\n\t\t\t\t\t.text( self.modalArgs.labels.confirmAction );\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t$button\n\t\t\t\t\t\t.data( 'isConfirming', false )\n\t\t\t\t\t\t.removeClass( 'tingle-btn--danger' )\n\t\t\t\t\t\t.addClass( 'tingle-btn--default' )\n\t\t\t\t\t\t.text( self.modalArgs.labels.cancel );\n\t\t\t\t}, 3000 );\n\t\t\t} else {\n\t\t\t\tself.modal.close();\n\t\t\t}\n\t\t};\n\n\t\tself.setMode = function( mode ) {\n\t\t\tself.mode = mode;\n\t\t};\n\n\t\tself.getMode = function() {\n\t\t\treturn self.mode ? self.mode : 'add';\n\t\t};\n\n\t\tself.stashFormData = function() {\n\t\t\tself.formData = self.$modal.find( 'form' ).serialize();\n\t\t};\n\n\t\tself.hasChanges = function() {\n\t\t\treturn self.$modal.find( 'form' ).serialize() !== self.formData;\n\t\t};\n\n\t\tself.bindResizeEvents = function() {\n\n\t\t\t$( document ).on( 'gpnf_post_render.{0}'.gformFormat( self.getNamespace() ), function() {\n\t\t\t\t/*\n\t\t\t\t * Move handler to the bottom of the stack to ensure that everything in this event has finished such as\n\t\t\t\t * GPLD inline datepicker.\n\t\t\t\t */\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tself.modal.checkOverflow();\n\t\t\t\t}, 0);\n\t\t\t} );\n\n\t\t\t$( document ).on( 'gform_post_conditional_logic.{0}'.gformFormat( self.getNamespace() ), function( event, formId ) {\n\t\t\t\tif ( self.nestedFormId == formId ) {\n\t\t\t\t\tself.modal.checkOverflow();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Use .bind() to ensure that the \"this\" context is set correctly.\n\t\t\tgform.addAction( 'gform_list_post_item_add', self.modal.checkOverflow.bind(self.modal), 10, self.getNamespace() );\n\t\t\tgform.addAction( 'gform_list_post_item_delete', self.modal.checkOverflow.bind(self.modal), 10, self.getNamespace() );\n\n\t\t};\n\n\t\tself.isBound = function( elem ) {\n\t\t\treturn ! ! ko.dataFor( elem );\n\t\t};\n\n\t\tself.prepareEntriesForKnockout = function( entries ) {\n\t\t\tfor ( var i = 0; i < entries.length; i++ ) {\n\t\t\t\tentries[i] = self.prepareEntryForKnockout( entries[i] );\n\t\t\t}\n\t\t\treturn entries;\n\t\t};\n\n\t\tself.addRowIdComputedToEntries = function( entries ) {\n\t\t\tfor ( var i = 0; i < entries().length; i++ ) {\n\t\t\t\tentries.splice( i, 1, self.addRowIdComputedToEntry( entries()[i] ) );\n\t\t\t}\n\n\t\t\treturn entries;\n\t\t};\n\n\t\tself.prepareEntryForKnockout = function( entry ) {\n\t\t\t// IE8 hack to fix recursive loop issue; props to Josh Casey\n\t\t\tvar entryTemplate = $.extend( {}, entry );\n\n\t\t\tfor ( var prop in entryTemplate ) {\n\t\t\t\tif ( entry.hasOwnProperty( prop ) ) {\n\t\t\t\t\tvar item = entry[ prop ];\n\t\t\t\t\tif ( item.label === false ) {\n\t\t\t\t\t\titem.label = '';\n\t\t\t\t\t}\n\t\t\t\t\tentry['f' + prop] = item;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tentry = self.addRowIdComputedToEntry( entry );\n\n\t\t\treturn entry;\n\t\t};\n\n\t\t/*\n\t\t * Row ID should be computed otherwise we'd need to update all entries using AJAX on delete, etc.\n\t\t *\n\t\t * We also need to do it after Knockout is actually initialized so the computed works correctly upon reload.\n\t\t */\n\t\tself.addRowIdComputedToEntry = function( entry ) {\n\t\t\tvar rowIdComputed = ko.computed( function () {\n\t\t\t\tvar entryIds = $.map( self.viewModel ? self.viewModel.entries() : self.entries, function ( entry ) {\n\t\t\t\t\treturn parseInt( entry.id );\n\t\t\t\t} );\n\n\t\t\t\tvar rowId = entryIds.indexOf( parseInt( entry.id ) ) + 1;\n\n\t\t\t\t/**\n\t\t\t\t * Filter the row ID summary column value.\n\t\t\t\t *\n\t\t\t\t * @since 1.1.12\n\t\t\t\t *\n\t\t\t\t * @param {number} \t\t\trowId \t\tThe entry's row ID summary column value.\n\t\t\t\t * @param {object} \t\t\tentry \t\tThe child entry being displayed.\n\t\t\t\t * @param {GPNestedForms} \tgpnf      \tCurrent instance of the GPNestedForms object.\n\t\t\t\t */\n\t\t\t\treturn window.gform.applyFilters( 'gpnf_row_id_value', rowId, entry, self );\n\t\t\t}, self.viewModel );\n\n\t\t\tvar rowId = {\n\t\t\t\tlabel: rowIdComputed,\n\t\t\t\tvalue: rowIdComputed,\n\t\t\t};\n\n\t\t\tentry['row_id'] = rowId;\n\t\t\tentry['frow_id'] = rowId;\n\n\t\t\treturn entry;\n\t\t}\n\n\t\tself.refreshMarkup = function() {\n\n\t\t\treturn $.post( self.ajaxUrl, {\n\t\t\t\taction: 'gpnf_refresh_markup',\n\t\t\t\tnonce: GPNFData.nonces.refreshMarkup,\n\t\t\t\tgpnf_parent_form_id: self.formId,\n\t\t\t\tgpnf_nested_form_field_id: self.fieldId,\n\t\t\t\tgpnf_context: self.ajaxContext\n\t\t\t}, function( response ) {\n\t\t\t\tself.formHtml = response;\n\t\t\t} );\n\n\t\t};\n\n\t\tself.editEntry = function( entryId, $trigger ) {\n\n\t\t\tvar $spinner = new AjaxSpinner( $trigger, self.spinnerUrl, '' );\n\t\t\t$trigger.css( { visibility: 'hidden' } );\n\n\t\t\t$.post( self.ajaxUrl, {\n\t\t\t\taction: 'gpnf_edit_entry',\n\t\t\t\tnonce: GPNFData.nonces.editEntry,\n\t\t\t\tgpnf_entry_id: entryId,\n\t\t\t\tgpnf_parent_form_id: self.formId,\n\t\t\t\tgpnf_nested_form_field_id: self.fieldId,\n\t\t\t\tgpnf_context: self.ajaxContext\n\t\t\t\t}, function( response ) {\n\n\t\t\t\t\t$spinner.destroy();\n\t\t\t\t\t$trigger.css( { visibility: 'visible' } );\n\n\t\t\t\t\tself.setModalContent( response, 'edit' );\n\t\t\t\t\tself.openModal( function() {\n\t\t\t\t\t\t// This is the element to which the focus should be returned after the modal is closed.\n\t\t\t\t\t\treturn self.$parentFormContainer.find( '[data-entryid=\"' + entryId + '\"]' ).find( '.edit' ).find( 'a, button' );\n\t\t\t\t\t} );\n\n            } );\n\n\t\t};\n\n\t\tself.deleteEntry = function( item, $trigger, opts ) {\n\n\t\t\t/**\n\t\t\t * Filter whether the child entry should be deleted. Useful for\n\t\t\t * adding custom confirmations before deleting.\n\t\t\t *\n\t\t\t * @since 1.0-rc-1.10\n\t\t\t *\n\t\t\t * @param boolean \t\t\tshouldDelete \t\tWhether the child entry should be deleted.\n\t\t\t * @param object \t\t\titem \t\t\t    The child entry being deleted.\n\t\t\t * @param JQuery           \t$trigger \t\t\tThe element that triggered the deletion.\n\t\t\t * @param {GPNestedForms} \tgpnf      \t\t\tCurrent instance of the GPNestedForms object.\n\t\t\t */\n\t\t\tif ( window.gform.applyFilters( 'gpnf_should_delete', true, item, $trigger, self ) === false ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar defaultOpts = {\n\t\t\t\tshowSpinner: true\n\t\t\t};\n\n\t\t\topts = $.extend({}, defaultOpts, opts)\n\n\t\t\tvar $spinner = null;\n\t\t\tif (opts.showSpinner) {\n\t\t\t\t$spinner = new AjaxSpinner( $trigger, self.spinnerUrl, '' );\n\t\t\t}\n\n\t\t\t$trigger.css( { visibility: 'hidden' } );\n\n\t\t\t$.post( self.ajaxUrl, {\n\t\t\t\taction: 'gpnf_delete_entry',\n\t\t\t\tnonce:  GPNFData.nonces.deleteEntry,\n\t\t\t\tgpnf_entry_id: item.id\n\t\t\t\t}, function( response ) {\n\n\t\t\t\t\tif ($spinner) {\n\t\t\t\t\t\t$spinner.destroy();\n\t\t\t\t\t}\n\n\t\t\t\t\t$trigger.css( { visibility: 'visible' } );\n\n\t\t\t\t\tif ( ! response ) {\n\t\t\t\t\t\tconsole.log( 'Error: no response.' );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else if ( ! response.success ) {\n\t\t\t\t\t\tconsole.log( 'Error:' + response.data );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Success!\n\t\t\t\t\tself.viewModel.entries.remove(function (currItem) {\n\t\t\t\t\t\treturn currItem.id === item.id || currItem === item;\n\t\t\t\t\t} );\n\n\t\t\t\t\t/**\n\t\t\t\t\t * Filter to determine if the child form HTML should be refreshed after deleting child entries.\n\t\t\t\t\t *\n\t\t\t\t\t * Return \"false\" here to disable refreshing child form HTML via AJAX after entries are deleted.\n\t\t\t\t\t *\n\t\t\t\t\t * @since 1.0-beta-9.28\n\t\t\t\t\t *\n\t\t\t\t\t * @param boolean \t\t\trefreshMarkup   \tWhether or not to refresh HTML after deleting entries.\n\t\t\t\t\t * @param int           \tformId \t\t\t\tThe parent form ID.\n\t\t\t\t\t * @param int             \tfieldId   \t\t\tThe field ID of the Nested Form field.\n\t\t\t\t\t * @param {GPNestedForms} \tgpnf      \t\t\tCurrent instance of the GPNestedForms object.\n\t\t\t\t\t */\n\t\t\t\t\tif ( window.gform.applyFilters( 'gpnf_fetch_form_html_after_delete', true, self.formId, self.fieldId, self ) ) {\n\t\t\t\t\t\tself.refreshMarkup();\n\t\t\t\t\t}\n            } );\n\n\t\t};\n\n\t\tself.duplicateEntry = function( entryId, $trigger ) {\n\n\t\t\tvar $spinner = new AjaxSpinner( $trigger, self.spinnerUrl, '' );\n\t\t\t$trigger.css( { visibility: 'hidden' } );\n\n\t\t\t$.post(\n\t\t\t\tself.ajaxUrl,\n\t\t\t\t{\n\t\t\t\t\taction: 'gpnf_duplicate_entry',\n\t\t\t\t\tnonce: GPNFData.nonces.duplicateEntry,\n\t\t\t\t\tgpnf_entry_id: entryId,\n\t\t\t\t\tgpnf_parent_form_id: self.formId,\n\t\t\t\t\tgpnf_nested_form_field_id: self.fieldId\n\t\t\t\t},\n\t\t\t\tfunction( response ) {\n\n\t\t\t\t\t$spinner.destroy();\n\t\t\t\t\t$trigger.css( { visibility: 'visible' } );\n\n\t\t\t\t\tif ( response.success ) {\n\t\t\t\t\t\tGPNestedForms.loadEntry( response.data );\n\t\t\t\t\t}\n\n\t\t\t\t\t/**\n\t\t\t\t\t * Do something after a child entry has been duplicated on the frontend.\n\t\t\t\t\t *\n\t\t\t\t\t * @param object entry    The properties of the child entry including field values.\n\t\t\t\t\t * @param object response The full response from the duplication AJAX request.\n\t\t\t\t\t *\n\t\t\t\t\t * @since 1.0-beta-8.70\n\t\t\t\t\t */\n\t\t\t\t\tgform.doAction( 'gpnf_post_duplicate_entry', response.data.entry, response );\n\n\t\t\t\t}\n\t\t\t);\n\t\t};\n\n\t\tself.getFormHtml = function() {\n\n\t\t\tif (self.formHtml) {\n\t\t\t\treturn $.when(self.formHtml);\n\t\t\t}\n\n\t\t\treturn self.refreshMarkup();\n\n\t\t};\n\n\t\tself.initFormScripts = function( currentPage ) {\n\n\t\t\t/**\n\t\t\t * Do something immediately before the nested form modal is initialized.\n\t\t\t *\n\t\t\t * @since 1.0-beta-8.25\n\t\t\t *\n\t\t\t * @param int            nestedFormId The ID of the nested form being initialized in the modal.\n\t\t\t * @param \\GPNestedForms gpnf         The instance of GPNestedForms (specific to the parent form and Nested Form field) that is initializing the modal.\n\t\t\t */\n\t\t\twindow.gform.doAction( 'gpnf_init_nested_form', self.nestedFormId, self );\n\t\t\t$( document ).trigger( 'gform_post_render', [ self.nestedFormId, currentPage ] );\n\n\t\t\tif ( window['gformInitDatepicker'] ) {\n\t\t\t\t/*\n\t\t\t\t * Disable focusTrap if interacting with date picker. Even though we have allowOutsideClick enabled, this addresses\n\t\t\t\t * a bug with Firefox where the selects cannot be interacted with.\n\t\t\t\t */\n\t\t\t\tif (self.trap) {\n\t\t\t\t\tgform.addFilter( 'gform_datepicker_options_pre_init', function ( optionsObj, formId ) {\n\t\t\t\t\t\tif ( formId != self.nestedFormId ) {\n\t\t\t\t\t\t\treturn optionsObj;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar origBeforeShow = optionsObj.beforeShow;\n\t\t\t\t\t\toptionsObj.beforeShow = function ( input, inst ) {\n\t\t\t\t\t\t\torigBeforeShow( input, inst );\n\t\t\t\t\t\t\tself.trap.deactivate({ returnFocus: false });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar origOnClose = optionsObj.onClose;\n\t\t\t\t\t\toptionsObj.onClose = function ( input, inst ) {\n\t\t\t\t\t\t\torigOnClose( input, inst );\n\t\t\t\t\t\t\tself.trap.activate();\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn optionsObj;\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\tself.$modal.find( '.datepicker' ).each( function() {\n\t\t\t\t\t// Remove 'hasDatepicker' before initializing. This seems to be added when viewing\n\t\t\t\t\t// in a Gravity Flow Inbox page and breaks jQuery's Date Picker.\n\t\t\t\t\t$( this ).removeClass( 'hasDatepicker' );\n\t\t\t\t\tgformInitSingleDatepicker( $( this ) );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tself.handleParentMergeTag();\n\n\t\t\tgform.addAction('gform_post_conditional_logic_field_action', function (formId, action, targetId, defaultValues, isInit) {\n\t\t\t\tif ( self.nestedFormId == formId ) {\n\t\t\t\t\tvar fieldId = gf_get_input_id_by_html_id(targetId);\n\t\t\t\t\tself.handleParentMergeTag( [fieldId] );\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * We really need a better way to trigger calculations.\n\t\t */\n\t\tself.runCalc = function() {\n\t\t\t$( document ).trigger( 'gform_post_conditional_logic', [ self.formId, [], false ] );\n\t\t};\n\n\t\tself.parseCalcs = function( formula, formulaField, formId, calcObj ) {\n\n\t\t\tif ( formId != self.formId ) {\n\t\t\t\treturn formula;\n\t\t\t}\n\n\t\t\tvar matches = getMatchGroups( formula, /{[^{]*?:([0-9]+):(sum|total|count|set)=?([0-9]*)}/i );\n\t\t\t$.each( matches, function( i, group ) {\n\n\t\t\t\tvar search            = group[0],\n\t\t\t\t\tnestedFormFieldId = group[1],\n\t\t\t\t\tfunc              = group[2],\n\t\t\t\t\ttargetFieldId     = group[3],\n\t\t\t\t\treplace           = 0;\n\n\t\t\t\tif ( nestedFormFieldId != self.fieldId ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t * Return 0 if the Nested Form field is hidden with Conditional Logic.\n\t\t\t\t * This matches the backend behavior of discarding any child entries if the Nested Form field is hidden.\n\t\t\t\t */\n\t\t\t\tif ( gformIsHidden( self.$fieldContainer.find('> :first-child') ) ) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * Filter the child entries used for Nested Forms' calculation merge tag modifiers such as :count, :sum,\n\t\t\t\t * and more. This is useful for conditionally including/excluding entries while calculating the results.\n\t\t\t\t *\n\t\t\t\t * @since 1.1.5\n\t\t\t\t *\n\t\t\t\t * @param {array}           entries         Child entries to be used for calculations\n\t\t\t\t * @param {object}          match           Information about the matched merge tag.\n\t\t\t\t * @param {int}             fieldId         ID of the Nested Form field.\n\t\t\t\t * @param {int}             formId          ID of the child form.\n\t\t\t\t * @param {GPNestedForms}   gpnf            Current instance of the GPNestedForms object.\n\t\t\t\t * @param {object}          formulaField    The formula field with the merge tag in it.\n\t\t\t\t */\n\t\t\t\tvar entries = window.gform.applyFilters( 'gpnf_calc_entries', self.viewModel.entries(), {\n\t\t\t\t\tsearch,\n\t\t\t\t\tnestedFormFieldId,\n\t\t\t\t\tfunc,\n\t\t\t\t\ttargetFieldId,\n\t\t\t\t}, self.fieldId, self.formId, self, formulaField );\n\n\t\t\t\tswitch ( func ) {\n\t\t\t\t\tcase 'sum':\n\t\t\t\t\t\tvar total = 0;\n\t\t\t\t\t\tentries.forEach( function( entry ) {\n\t\t\t\t\t\t\tvar value = 0;\n\t\t\t\t\t\t\tif ( typeof entry[ targetFieldId ] !== 'undefined' ) {\n\t\t\t\t\t\t\t\tvalue = entry[ targetFieldId ].value ? gformToNumber( entry[ targetFieldId ].value ) : 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttotal += parseFloat( value );\n\t\t\t\t\t\t} );\n\t\t\t\t\t\treplace = total;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'total':\n\t\t\t\t\t\tvar total = 0;\n\t\t\t\t\t\tentries.forEach( function( entry ) {\n\t\t\t\t\t\t\ttotal += parseFloat( entry.total );\n\t\t\t\t\t\t} );\n\t\t\t\t\t\treplace = total;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'count':\n\t\t\t\t\t\treplace = entries.length;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'set':\n\t\t\t\t\t\tvar items = [];\n\t\t\t\t\t\tentries.forEach( function( entry ) {\n\t\t\t\t\t\t\tvar value = 0;\n\t\t\t\t\t\t\tif ( typeof entry[ targetFieldId ] !== 'undefined' && entry[ targetFieldId ].value ) {\n\t\t\t\t\t\t\t\tvalue = gformToNumber( entry[ targetFieldId ].value );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\titems.push( value );\n\t\t\t\t\t\t} );\n\t\t\t\t\t\treplace = items.join( ', ' );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * Filter the replacement values for Nested Forms calculation merge tag modifiers such as :sum.\n\t\t\t\t *\n\t\t\t\t * @since 1.1.5\n\t\t\t\t *\n\t\t\t\t * @param {float}             replace         Replacement value to use for the merge tag in the calculation.\n\t\t\t\t * @param {object}            match           Information about the matched merge tag.\n\t\t\t\t * @param {array}             entries         Child entries to be used for calculations\n\t\t\t\t * @param {int}               fieldId         ID of the Nested Form field.\n\t\t\t\t * @param {int}               formId          ID of the child form.\n\t\t\t\t * @param {GPNestedForms}     gpnf            Current instance of the GPNestedForms object.\n\t\t\t\t * @param {object}            formulaField    The formula field with the merge tag in it.\n\t\t\t\t */\n\t\t\t\treplace = window.gform.applyFilters( 'gpnf_calc_replacement_value', replace, {\n\t\t\t\t\tsearch,\n\t\t\t\t\tnestedFormFieldId,\n\t\t\t\t\tfunc,\n\t\t\t\t\ttargetFieldId,\n\t\t\t\t}, entries, self.fieldId, self.formId, self, formulaField );\n\n\t\t\t\tformula = formula.replace( search, replace );\n\n\t\t\t} );\n\n\t\t\treturn formula;\n\t\t};\n\n\t\tself.handleParentMergeTag = function ( fieldIds ) {\n\n\t\t\tvar $inputs;\n\n\t\t\tif ( typeof fieldIds !== 'undefined' ) {\n\t\t\t\tvar selectors = [];\n\t\t\t\t$.each( fieldIds, function( index, fieldId ) {\n\t\t\t\t\tselectors.push( '#field_{0}_{1}'.gformFormat( self.nestedFormId, fieldId ) );\n\t\t\t\t} );\n\t\t\t\t$inputs = self.$modal.find( selectors.join( ',' ) ).find( ':input' );\n\t\t\t} else {\n\t\t\t\t$inputs = self.$modal.find( ':input' );\n\t\t\t}\n\n\t\t\t$inputs.each(function () {\n\t\t\t\tvar $this = $( this );\n\t\t\t\tvar value = $this.data( 'gpnf-value' );\n\n\t\t\t\tif ( ! value) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\n\t\t\t\t/**\n\t\t\t\t * Removes parent merge tags for child/parent values that are empty\n\t\t\t\t * so when editing or if a validation error comes up, there\n\t\t\t\t * aren't fields still showing {Parent} merge tags.\n\t\t\t\t */\n\t\t\t\tfunction clearEmptyParentMergeTags(el) {\n\t\t\t\t\tvar $el = $(el);\n\t\t\t\t\tvalue = $el.val();\n\n\t\t\t\t\tvar parentMergeTags = self.getParentMergeTags( value );\n\n\t\t\t\t\tif ( parentMergeTags.length ) {\n\t\t\t\t\t\tfor ( var i = 0, max = parentMergeTags.length; i < max; i ++ ) {\n\t\t\t\t\t\t\tvalue = value.replace( parentMergeTags[i][0], '' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$el.val( value ).change().trigger(\"chosen:updated\");\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/* Do not copy in parent merge tag values, only clear out ones with empty values */\n\t\t\t\tif ( self.$modal.find( '.gform_validation_error' ).length !== 0 ) {\n\t\t\t\t\tclearEmptyParentMergeTags(this);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tvar parentMergeTagMatches = self.getParentMergeTags( value );\n\n\t\t\t\tif ( ! parentMergeTagMatches) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0; i < parentMergeTagMatches.length; i++ ) {\n\n\t\t\t\t\tvar inputId = parentMergeTagMatches[i][1];\n\n\t\t\t\t\tif (isNaN( inputId )) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar $parentInput = self.$parentFormContainer.find( '#input_' + self.formId + '_' + inputId.split( '.' ).join( '_' ) );\n\t\t\t\t\tif ( $parentInput.hasClass( 'gfield_radio' ) || $parentInput.hasClass( 'gfield_checkbox' ) ) {\n\t\t\t\t\t\t$parentInput = $parentInput.find( 'input:checked' );\n\t\t\t\t\t}\n\n\t\t\t\t\tvar parentValue = [];\n\n\t\t\t\t\t// Apply input label if :label modifier is added\n\t\t\t\t\tif ( parentMergeTagMatches[i][0].indexOf(':label') !== -1 ) {\n\t\t\t\t\t\t$parentInput.each(function() {\n\t\t\t\t\t\t\tvar $input = $(this);\n\n\t\t\t\t\t\t\tif ( $input.hasClass('gfield_select') ) {\n\t\t\t\t\t\t\t\tparentValue.push($input.find('option:selected').text());\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tparentValue.push($input.parent().find('label').text());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$parentInput.each(function() {\n\t\t\t\t\t\t\tparentValue.push($(this).val());\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// Convert array of values to string.\n\t\t\t\t\tparentValue = parentValue.join(', ');\n\n\t\t\t\t\t/**\n\t\t\t\t\t * Filter the value of the parent merge tag before it is replaced in the field.\n\t\t\t\t\t *\n\t\t\t\t\t * @since 1.0-beta-8.0\n\t\t\t\t\t *\n\t\t\t\t\t * @param string          value           Value that will replace the parent merge tag in the field.\n\t\t\t\t\t * @param float           inputId         ID of the field/input targeted by the parent merge tag.\n\t\t\t\t\t * @param int             formId          ID of the current form.\n\t\t\t\t\t * @param {GPNestedForms} gpnf            Current instance of the GPNestedForms object.\n\t\t\t\t\t */\n\t\t\t\t\tparentValue = gform.applyFilters( 'gpnf_parent_merge_tag_value', $parentInput.length ? parentValue : '', inputId, self.formId, self );\n\n\t\t\t\t\tvalue = value.replace( parentMergeTagMatches[i][0], parentValue );\n\n\t\t\t\t}\n\n\t\t\t\tvalue = value.trim();\n\n\t\t\t\tvar currentValue = $( this ).val();\n\n\t\t\t\t/**\n\t\t\t\t * Filter whether GPNF should re-populate any parent merge tags  when editing an entry\n\t\t\t\t *\n\t\t\t\t * @since 1.0-beta-9.28\n\t\t\t\t *\n\t\t\t\t * @param boolean \t\t\treplace_parent_merge_tag   Whether or not to re-apply parent merge tags\n\t\t\t\t * @param int           \tformId \t\t\t\t       The parent form ID.\n\t\t\t\t */\n\t\t\t\tif ( self.mode === 'edit' && ! gform.applyFilters( 'gpnf_replace_parent_merge_tag_on_edit', false, self.formId ) ) {\n\t\t\t\t\t// Skip processing edited/populated merge tags.\n\t\t\t\t\t// One exception here is that we need to ensure that `{parent}` merge tags are removed.\n\t\t\t\t\t// This can occur when editing a child entry with an empty field and an empty parent field value.\n\t\t\t\t\t// See: HS#27251\n\t\t\t\t\tclearEmptyParentMergeTags(this);\n\n\t\t\t\t\t// Update GP Read Only hidden capture to the current value of the input that way when editing it doesn't revert to\n\t\t\t\t\t// the parent merge tag as the value.\n\t\t\t\t\t$( this ).siblings( `input[name^=\"gwro_hidden_capture_\"]` )\n\t\t\t\t\t         .val( currentValue );\n\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\t// Update GP Read Only hidden capture to the new value of the input from the parent merge tag.\n\t\t\t\t\t$( this ).siblings( `input[name^=\"gwro_hidden_capture_\"]` )\n\t\t\t\t\t         .val( value );\n\t\t\t\t}\n\n\t\t\t\tif ( currentValue != value ) {\n\t\t\t\t\t$( this ).val( value ).change().trigger( \"chosen:updated\" ).trigger('gpnfUpdatedFromParentMergeTag');\n\n\t\t\t\t\t// TinyMCE appears to initialize _before_ the parent merge tags are handled. Instead of changing priority, reset the TinyMCE editor content accordingly.\n\t\t\t\t\tconst inputIdBits = $( this ).prop( 'id' )?.split( '_' );\n\t\t\t\t\tconst fieldId = inputIdBits?.[2];\n\n\t\t\t\t\tconst tinyMCEEditor = window?.tinyMCE?.editors?.[`input_${self.nestedFormId}_${fieldId}`];\n\n\t\t\t\t\tif ( tinyMCEEditor ) {\n\t\t\t\t\t\ttinyMCEEditor.setContent( value );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t};\n\n\t\tself.getParentMergeTags = function( string ) {\n\n\t\t\tvar matches = [],\n\t\t\t\tpattern = /{Parent:(\\d+(\\.\\d+)?)[^\\}]*}/i;\n\n\t\t\twhile ( pattern.test( string ) ) {\n\t\t\t\tvar i      = matches.length;\n\t\t\t\tmatches[i] = pattern.exec( string );\n\t\t\t\tstring     = string.replace( '' + matches[i][0], '' );\n\t\t\t}\n\n\t\t\treturn matches;\n\t\t};\n\n\t\tself.getCurrentPage = function() {\n\t\t\tvar currentPage = $( '#gform_source_page_number_{0}'.gformFormat( self.nestedFormId ) ).val();\n\t\t\treturn Math.max( 1, parseInt( currentPage ) );\n\t\t};\n\n\t\tself.getCurrentEntryId = function() {\n\t\t\treturn self.$modal.find( 'input[name=\"gpnf_entry_id\"]' ).val()\n\t\t};\n\n\t\tself.getEntryRow = function( entryId ) {\n\t\t\treturn $( '.gpnf-nested-entries [data-entryid=\"' + entryId + '\"]' );\n\t\t};\n\n\t\tself.getDebugId = function() {\n\t\t\treturn 'xxxxxxxx'.replace( /[xy]/g, function ( c ) {\n\t\t\t\tvar r = Math.random() * 16 | 0, v = c == 'x' ? r : r & 0x3 | 0x8;\n\t\t\t\treturn v.toString( 16 );\n\t\t\t} );\n\t\t};\n\n\t\tself.getNamespace = function() {\n\t\t\treturn 'gpnf-{0}-{1}'.gformFormat( self.formId, self.fieldId );\n\t\t};\n\n\t\t/**\n\t\t * Initialize the iframe to receive posted form response. Cannot rely on Gravity Forms 2.5+ to handle this due\n\t\t * to a loading order-of-events issue introduced by the switch to DOMContentLoaded from document.ready.\n\t\t *\n\t\t * @param {int} formId\n\t\t */\n\t\tself.initIframe = function( formId ) {\n\t\t\t$( '#gform_ajax_frame_{0}'.gformFormat( formId ) )\n\t\t\t\t// This hasn't been proven to be necessary but added this to make it as bulletproof as possible given\n\t\t\t\t// that < GF 2.5 will still bind its own event to the iframe's load.\n\t\t\t\t.off( 'load' )\n\t\t\t\t.on( 'load', function() {\n\t\t\t\t\tvar contents    = $( this ).contents().find( '*' ).html();\n\t\t\t\t\tvar is_postback = contents.indexOf( 'GF_AJAX_POSTBACK' ) >= 0;\n\t\t\t\t\tif ( ! is_postback ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar form_content    = $( this ).contents().find( '#gform_wrapper_{0}'.gformFormat( formId ) );\n\t\t\t\t\tvar is_confirmation = $( this ).contents().find( '#gform_confirmation_wrapper_{0}'.gformFormat( formId ) ).length > 0;\n\t\t\t\t\tvar is_redirect     = contents.indexOf( 'gformRedirect(){' ) >= 0;\n\t\t\t\t\tvar is_form         = form_content.length > 0 && ! is_redirect && ! is_confirmation;\n\t\t\t\t\tvar $formWrapper    = $( '#gform_wrapper_{0}'.gformFormat( formId ) );\n\t\t\t\t\tif ( is_form ) {\n\t\t\t\t\t\t$formWrapper.html( form_content.html() );\n\t\t\t\t\t\tif (form_content.hasClass( 'gform_validation_error' )) {\n\t\t\t\t\t\t\t$formWrapper.addClass( 'gform_validation_error' );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$formWrapper.removeClass( 'gform_validation_error' );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetTimeout( function() { /* delay the scroll by 50 milliseconds to fix a bug in chrome */ }, 50 );\n\t\t\t\t\t\tif ( window['gformInitPriceFields']) {\n\t\t\t\t\t\t\tgformInitPriceFields();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar current_page = $( '#gform_source_page_number_{0}'.gformFormat( formId ) ).val();\n\t\t\t\t\t\t$( document ).trigger( 'gform_page_loaded', [ formId, current_page] );\n\t\t\t\t\t\twindow[ 'gf_submitting_{0}'.gformFormat( formId ) ] = false;\n\t\t\t\t\t} else if ( ! is_redirect) {\n\t\t\t\t\t\tvar confirmation_content = $( this ).contents().find( '.GF_AJAX_POSTBACK' ).html();\n\t\t\t\t\t\tif ( ! confirmation_content) {\n\t\t\t\t\t\t\tconfirmation_content = contents;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\t\t$formWrapper.replaceWith( confirmation_content );\n\t\t\t\t\t\t\t$( document ).trigger( 'gform_confirmation_loaded', [ formId ] );\n\t\t\t\t\t\t\twindow[ 'gf_submitting_{0}'.gformFormat( formId ) ] = false;\n\t\t\t\t\t\t}, 50 );\n\t\t\t\t\t}\n\t\t\t\t\t$( document ).trigger( 'gpnf_post_render', [ formId, current_page] );\n\t\t\t\t} );\n\t\t}\n\n\t\tGPNestedForms.deleteEntry = function( item, $trigger, opts ) {\n\t\t\tself.deleteEntry( item, $trigger, opts );\n\t\t};\n\n\t\t/**\n\t\t * Static function called via the confirmation of the nested form. Loads the newly created entry into the\n\t\t * Nested Form field displayed on the parent form.\n\t\t *\n\t\t * @param args\n\t\t */\n\t\tGPNestedForms.loadEntry = function( args ) {\n\n\t\t\t/** @var \\GPNestedForms gpnf */\n\t\t\tvar gpnf          = window[ 'GPNestedForms_{0}_{1}'.gformFormat( args.formId, args.fieldId ) ];\n\t\t\tvar refreshMarkup = true;\n\n\t\t\tconst entry = gpnf.prepareEntryForKnockout( args.fieldValues );\n\t\t\tentry.id    = args.entryId;\n\n\t\t\t// edit\n\t\t\tif ( args.mode == 'edit' ) {\n\n\t\t\t\t// get index of entry\n\t\t\t\tvar entryEditing     = self.getEntryRow( entry.id );\n\t\t\t\tvar replacementIndex = entryEditing.index();\n\n\t\t\t\t// remove old entry, add updated\n\t\t\t\tgpnf.viewModel.entries.remove( function( item ) { return item.id == entry.id } );\n\t\t\t\tgpnf.viewModel.entries.splice( replacementIndex, 0, entry );\n\n\t\t\t}\n\t\t\t// add\n\t\t\telse {\n\n\t\t\t\tgpnf.viewModel.entries.push( entry );\n\n\t\t\t\t/**\n\t\t\t\t * Filter to determine if the child form HTML should be refreshed after adding entries.\n\t\t\t\t *\n\t\t\t\t * Return \"false\" here to disable refreshing child form HTML via AJAX after new entries are added.\n\t\t\t\t *\n\t\t\t\t * @since 1.0-beta-9.28\n\t\t\t\t *\n\t\t\t\t * @param boolean \t\t\trefreshMarkup   \tWhether or not to refresh HTML after adding entries.\n\t\t\t\t * @param int           \tformId \t\t\t\tThe parent form ID.\n\t\t\t\t * @param int             \tfieldId   \t\t\tThe field ID of the Nested Form field.\n\t\t\t\t * @param {GPNestedForms} \tgpnf      \t\t\tCurrent instance of the GPNestedForms object.\n\t\t\t\t */\n\t\t\t\trefreshMarkup = window.gform.applyFilters( 'gpnf_fetch_form_html_after_add', refreshMarkup, self.formId, self.fieldId, self );\n\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Filter to determine if the child form HTML should be refreshed after adding or editing entries.\n\t\t\t *\n\t\t\t * Return \"false\" here to disable refreshing child form HTML via AJAX after new entries are added or edited.\n\t\t\t *\n\t\t\t * @since 1.0.15\n\t\t\t *\n\t\t\t * @param boolean         refreshMarkup Whether or not to refresh HTML after adding entries.\n\t\t\t * @param int             formId        The parent form ID.\n\t\t\t * @param int             fieldId       The field ID of the Nested Form field.\n\t\t\t * @param {GPNestedForms} gpnf          Current instance of the GPNestedForms object.\n\t\t\t * @param object          args          The details of the request to add/edit the current entry.\n\t\t\t */\n\t\t\tif ( window.gform.applyFilters( 'gpnf_fetch_form_html_after_add_or_edit', refreshMarkup, self.formId, self.fieldId, self, args ) ) {\n\t\t\t\tgpnf.refreshMarkup();\n\t\t\t}\n\n\t\t\tif ( gpnf.isActive ) {\n\t\t\t\tgpnf.modal.close();\n\t\t\t}\n\n\t\t};\n\n\t\tself.init();\n\n\t};\n\n\tvar EntriesModel = function( entries, gpnf ) {\n\n\t\tvar self = this;\n\n\t\tself.entries = ko.observableArray( entries );\n\n\t\t/**\n\t\t * Trigger change event on the form when entries change. This helps notify other plugins that the form has\n\t\t * updated if they're listening to the form 'change' events.\n\t\t */\n\t\tself.entries.subscribe(function () {\n\t\t\tgpnf.$parentFormContainer.trigger( 'change' );\n\t\t});\n\n\t\tself.isMaxed = ko.computed( function() {\n\t\t\tvar max = gform.applyFilters( 'gpnf_entry_limit_max', gpnf.entryLimitMax, gpnf.formId, gpnf.fieldId, gpnf );\n\n\t\t\treturn max !== '' && self.entries().length >= max;\n\t\t} );\n\n\t\tself.entryIds = ko.computed( function() {\n\t\t\tvar entryIds = [];\n\t\t\t$.each( self.entries(), function( i, item ) {\n\t\t\t\tentryIds.push( item.id );\n\t\t\t} );\n\t\t\treturn entryIds;\n\t\t}, self );\n\n\t\t/**\n\t\t * Run calculations anytime entries modified.\n\t\t */\n\t\tself.runCalc = ko.computed( function() {\n\t\t\tgpnf.runCalc();\n\t\t\treturn self.entries().length;\n\t\t}, self );\n\n\t\tself.editEntry = function( item, event ) {\n\t\t\tgpnf.editEntry( item.id, $( event.target ) );\n\t\t};\n\n\t\tself.deleteEntry = function( item, event ) {\n\t\t\tgpnf.deleteEntry( item, $( event.target ) );\n\t\t};\n\n\t\tself.duplicateEntry = function( item, event ) {\n\t\t\tgpnf.duplicateEntry( item.id, $( event.target ) );\n\t\t}\n\n\t};\n\n\t// # GENERAL HELPERS\n\n\tfunction AjaxSpinner( elem, imageSrc, inlineStyles ) {\n\n\t\timageSrc     = typeof imageSrc == 'undefined' || ! imageSrc ? gf_global.base_url + '/images/spinner.gif' : imageSrc;\n\t\tinlineStyles = typeof inlineStyles != 'undefined' ? inlineStyles : '';\n\n\t\tthis.elem  = elem;\n\t\tthis.image = '<img class=\"gfspinner\" src=\"' + imageSrc + '\" style=\"' + inlineStyles + '\" />';\n\n\t\tthis.init = function() {\n\t\t\tthis.spinner = jQuery( this.image );\n\t\t\tjQuery( this.elem ).after( this.spinner );\n\t\t\treturn this;\n\t\t};\n\n\t\tthis.destroy = function() {\n\t\t\tjQuery( this.spinner ).remove();\n\t\t};\n\n\t\treturn this.init();\n\t}\n\n} )( jQuery );\n"],"names":["o","t","this","opts","arguments","length","hasOwnProperty","onClose","onOpen","beforeOpen","beforeClose","stickyFooter","footer","cssClass","closeLabel","closeMethods","init","e","modalBoxFooter","style","width","modalBox","clientWidth","left","offsetLeft","prototype","modal","document","createElement","classList","add","indexOf","display","forEach","modalCloseBtn","type","modalCloseBtnIcon","innerHTML","modalCloseBtnLabel","appendChild","modalBoxContent","call","_events","clickCloseBtn","close","bind","clickOverlay","offsetWidth","clientX","s","scrollHeight","offsetHeight","navigator","platform","parentElement","contains","target","resize","checkOverflow","keyboardNav","which","isOpen","addEventListener","window","body","firstChild","addFooter","_busy","_isBusy","destroy","removeEventListener","parentNode","removeChild","open","removeProperty","removeAttribute","getSelection","removeAllRanges","_scrollPosition","pageYOffset","top","setStickyFooter","remove","scrollTo","behavior","setContent","getContent","setFooterContent","getFooterContent","isOverflow","clientHeight","addFooterBtn","split","console","warn","innerHeight","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","n","getter","__esModule","d","a","definition","key","Object","defineProperty","enumerable","get","obj","prop","candidateSelectors","candidateSelector","join","matches","Element","msMatchesSelector","webkitMatchesSelector","getTabindex","node","tabindexAttr","parseInt","getAttribute","isNaN","contentEditable","isContentEditable","nodeName","tabIndex","sortOrderedTabbables","b","documentOrder","isInput","tagName","isNodeMatchingSelectorFocusable","options","disabled","isHiddenInput","displayCheck","getComputedStyle","visibility","nodeUnderDetails","_node$getBoundingClie","getBoundingClientRect","height","isHidden","Array","slice","apply","children","some","child","isDetailsWithSummary","i","item","isDisabledFromFieldset","isNodeMatchingSelectorTabbable","isRadio","name","radioSet","radioScope","form","ownerDocument","queryRadios","querySelectorAll","CSS","escape","err","error","message","checked","nodes","getCheckedRadio","isTabbableRadio","isNonTabbableRadio","focusableCandidateSelector","concat","isFocusable","Error","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","_defineProperty","value","configurable","writable","trapQueue","activeFocusTraps","activateTrap","trap","activeTrap","pause","trapIndex","splice","deactivateTrap","unpause","delay","fn","setTimeout","findIndex","arr","idx","every","valueOrHandler","_len","params","_key","getActualTarget","event","shadowRoot","composedPath","createFocusTrap","elements","userOptions","doc","config","source","getOwnPropertyDescriptors","defineProperties","_objectSpread2","returnFocusOnDeactivate","escapeDeactivates","delayInitialFocus","state","containers","tabbableGroups","nodeFocusedBeforeActivation","mostRecentlyFocusedNode","active","paused","delayInitialFocusTimer","getOption","configOverrideOptions","optionName","configOptionName","containersContain","element","container","getNodeForOption","optionValue","_len2","_key2","querySelector","getInitialFocusNode","activeElement","firstTabbableGroup","firstTabbableNode","updateTabbableNodes","map","regularTabbables","orderedTabbables","el","includeContainer","candidates","tabbableNodes","unshift","candidate","candidateTabindex","sort","lastTabbableNode","group","tryFocus","focus","preventScroll","toLowerCase","select","isSelectableInput","getReturnFocusNode","previousActiveElement","checkPointerDown","clickOutsideDeactivates","deactivate","returnFocus","allowOutsideClick","preventDefault","checkFocusIn","targetContained","Document","stopImmediatePropagation","checkKey","keyCode","isEscapeEvent","isTabEvent","destinationNode","containerIndex","_ref","shiftKey","startOfGroupIndex","_ref2","destinationGroupIndex","lastOfGroupIndex","_ref3","_destinationGroupIndex","checkTab","checkClick","addListeners","capture","passive","removeListeners","activate","activateOptions","onActivate","onPostActivate","checkCanFocusTrap","finishActivation","then","deactivateOptions","clearTimeout","onDeactivate","onPostDeactivate","checkCanReturnFocus","finishDeactivation","updateContainerElements","containerElements","elementsAsArray","Boolean","ko","$","String","gformFormat","args","replace","match","number","GPNestedForms","self","off","getNamespace","gform","removeHook","removeFilter","formId","fieldId","id","getDebugId","$fieldContainer","$parentFormContainer","parents","first","$modalSource","isActive","initialized","oldGPNF","entries","initKnockout","initCalculations","finalizeInit","inHiddenPage","currentPageNumber","val","$currentPage","find","debug","sessionPromise","initSession","on","openAddModal","initModal","addColorStyles","applyFilters","always","getFormHtml","post","ajaxUrl","sessionData","response","doAction","modalArgs","labels","modalLabels","closeScreenReaderLabel","colors","modalColors","modalStickyFooter","modalClass","enableFocusTrap","clearModalContent","setParentFocus","$modal","attr","getModalTitle","bindResizeEvents","currentPage","$nestedForm","nestedFormId","scrollToTop","initFormScripts","$firstInput","hasClass","inputAlreadyDisabled","datepicker","addModalButtons","observeDefaultButtons","triggerButtonAnimationOnSubmit","dataFor","prepareEntriesForKnockout","viewModel","EntriesModel","addRowIdComputedToEntries","applyBindings","addFilter","parseCalcs","runCalc","$spinner","AjaxSpinner","spinnerUrl","done","html","setModalContent","openModal","trigger","saveParentFocus","isGF25","jQuery","jquery","initIframe","parentFocus","$focus","modalContainerNode","scroll","scrollTop","observer","getDefaultButtonObserver","getDefaultButtons","each","observe","attributes","childList","MutationObserver","mutations","mutation","attributeName","data","addClass","mode","setMode","formHtml","prepend","modalHeaderColor","stashFormData","getMode","title","editTitle","hasPendingUploads","pendingUploads","gfMultiFileUploader","uploaders","uploader","total","queued","cancelButtonCSSClasses","cancel","handleCancelClick","$button","buttonType","isWooCommercePage","wc_gravity_form","label","getSubmitButtonLabel","classes","isDisabled","is","tingleBtn","gfStrings","gform_gravityforms","strings","alert","currently_uploading","click","mobileCancelClasses","deleteButtonClasses","delete","isConfirmActionEnabled","confirmAction","text","getEntryRow","getCurrentEntryId","submit","editSubmit","$style","primary","secondary","danger","append","getCurrentPage","disableNewCancelConfirmation","hasChanges","removeClass","formData","serialize","addAction","isBound","elem","prepareEntryForKnockout","addRowIdComputedToEntry","entry","entryTemplate","extend","rowIdComputed","computed","entryIds","rowId","refreshMarkup","action","nonce","GPNFData","nonces","gpnf_parent_form_id","gpnf_nested_form_field_id","gpnf_context","ajaxContext","editEntry","entryId","$trigger","css","gpnf_entry_id","deleteEntry","showSpinner","success","currItem","log","duplicateEntry","loadEntry","when","optionsObj","origBeforeShow","beforeShow","input","inst","origOnClose","gformInitSingleDatepicker","handleParentMergeTag","targetId","defaultValues","isInit","gf_get_input_id_by_html_id","formula","formulaField","calcObj","getMatchGroups","search","nestedFormFieldId","func","targetFieldId","gformIsHidden","gformToNumber","parseFloat","items","fieldIds","$inputs","selectors","index","clearEmptyParentMergeTags","$el","parentMergeTags","getParentMergeTags","max","change","parentMergeTagMatches","inputId","$parentInput","parentValue","$input","parent","trim","currentValue","siblings","inputIdBits","tinyMCEEditor","tinyMCE","editors","string","pattern","test","exec","Math","c","r","random","toString","contents","form_content","is_confirmation","is_redirect","is_form","$formWrapper","gformInitPriceFields","current_page","confirmation_content","replaceWith","gpnf","fieldValues","replacementIndex","observableArray","subscribe","isMaxed","entryLimitMax","imageSrc","inlineStyles","gf_global","base_url","image","spinner","after"],"sourceRoot":""}