"use strict";(self.webpackChunkgravityforms=self.webpackChunkgravityforms||[]).push([[319],{5456:function(t,e,o){o.r(e),o.d(e,{default:function(){return x}});var r=o(5518),n=o(9841),i=o(7329),a=o.n(i),c=window.wp||{},s=(null===a()||void 0===a()?void 0:a().block_editor)||{},l={ready:!1},u={insertButton:null},d=function(t){return c.data.select("core/blocks").getBlockTypes().filter((function(e){return!t||"gravityforms/form"!==e.name})).map((function(t){return t.name}))},f=function(){console.info("Gravity Forms Admin: Resetting Inserter Blocks State"),c.data.dispatch("core/edit-post").showBlockTypes(d(!1))},p=function(){var t=(0,r.queryToJson)();null!=t&&t.gfAddBlock&&(function(){var t;window.wp.data.dispatch("core/edit-post").setIsInserterOpened(!0),t=d(!0),c.data.dispatch("core/edit-post").hideBlockTypes(t),c.data.dispatch("core/edit-post").showBlockTypes(["gravityforms/form"]);var e=setInterval((function(){var t,o,n;u.insertButton=document.querySelector(".editor-block-list-item-gravityforms-form"),u.insertButton&&(l.ready=!0,o=document.createElement("div"),n=u.insertButton.getBoundingClientRect(),o.innerHTML='\n\t<div class="gform-block__tooltip-inner">\n\t\t<span class="gform-block__tooltip-title">'.concat(s.i18n.insert_gform_block_title,"</span>\n\t\t").concat((0,r.sprintf)(s.i18n.insert_gform_block_content,'<a class="gform-link" href="'.concat(s.urls.block_docs,'" rel="noopener" target="_blank">'),"</a>"),"\n\t</div>\n\t"),o.classList.add("gform-block__tooltip"),(0,r.isRtl)()?o.style="left: ".concat(n.right-(275+u.insertButton.clientWidth),"px; top: ").concat(n.top+u.insertButton.clientHeight/2,"px;"):o.style="left: ".concat(n.right+20,"px; top: ").concat(n.top+u.insertButton.clientHeight/2,"px;"),u.insertButton.addEventListener("mouseenter",(function(){o&&(o.style.opacity="0",setTimeout((function(){o.style.zIndex="-1"}),200))})),u.insertButton.parentNode.appendChild(o),t=c.data.subscribe((function(){c.data.select("core/block-editor").getBlocks().filter((function(t){return"gravityforms/form"===t.name&&void 0===t.originalContent})).length&&(t(),f())}))),l.ready&&clearInterval(e)}),500)}(),window.addEventListener("beforeunload",f),(0,r.consoleInfo)("Gravity Forms Admin: Initialized block editor insert form scripts."))},g=o(2577),m=o(7169),y=o(9662),v=o(6132),b=o(4489),k=o(1747),h=o(1519),_=o.n(h);function B(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function w(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?B(Object(o),!0).forEach((function(e){(0,m.Z)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):B(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var O=function(t){var e=Object.entries(t).filter((function(t){var e=(0,g.Z)(t,2),o=e[0],r=e[1];return C().includes(o)&&"string"==typeof r}));return Object.fromEntries(e)},C=function(){return["theme","inputSize","inputBorderRadius","inputBorderColor","inputBackgroundColor","inputColor","labelFontSize","labelColor","descriptionFontSize","descriptionColor","buttonPrimaryBackgroundColor","buttonPrimaryColor"]},P=function(t,e){new(_())({alertButtonText:(0,y.__)("OK","gravityforms"),content:e,closeButtonTitle:(0,y.__)("Close","gravityforms"),id:"copy-paste-error-alert",maskBlur:!1,maskTheme:"none",mode:"alert",title:t,titleIcon:"circle-delete",titleIconColor:"#DD301D",zIndex:100055}).showDialog()},S=function(){return!!window.isSecureContext||(P((0,y.__)("Copy / Paste Not Available","gravityforms"),(0,y.__)("Copy and paste functionality requires a secure connection. Reload this page using an HTTPS URL and try again.","gravityforms")),!1)},I=function(){return!(navigator.userAgent.indexOf("Firefox")>-1&&"function"!=typeof navigator.clipboard.readText&&(P((0,y.__)("Paste Not Available","gravityforms"),(0,y.__)("Your browser does not have permission to paste from the clipboard. <p>Please navigate to <strong>about:config</strong> and change the preference <strong>dom.events.asyncClipboard.readText</strong> to <strong>true</strong>.","gravityforms")),1))},T=function(){return React.createElement(k.Fragment,null,React.createElement(v.PluginBlockSettingsMenuItem,{allowedBlocks:["gravityforms/form"],icon:"",label:(0,y.__)("Copy Form Styles","gravityforms"),onClick:function(){return function(){if(S()){var t=(0,b.select)("core/block-editor").getSelectedBlock();navigator.clipboard.writeText(JSON.stringify(O(t.attributes))).then()}}()}}),React.createElement(v.PluginBlockSettingsMenuItem,{allowedBlocks:["gravityforms/form"],icon:"",label:(0,y.__)("Paste Form Styles","gravityforms"),onClick:function(){S()&&I()&&navigator.clipboard.readText().then((function(t){var e=w({},(0,b.select)("core/block-editor").getSelectedBlock());try{var o=O(JSON.parse(t));e.attributes=w(w({},e.attributes),o),(0,b.dispatch)("core/block-editor").updateBlock(e.clientId,e)}catch(t){P((0,y.__)("Invalid Form Styles","gravityforms"),(0,y.__)("Please ensure the form styles you are trying to paste are in the correct format.","gravityforms"))}}))}}))},x=function(){p(),(0,n.registerPlugin)("gravityforms",{render:T}),(0,r.consoleInfo)("Gravity Forms Admin: Initialized all block editor scripts.")}}}]);
//# sourceMappingURL=scripts-admin.block-editor.150af96c7dc6c93ba043.js.map